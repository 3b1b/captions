1
00:00:00,000 --> 00:00:03,418
In a moment, I will ask you a puzzle, and it's a pretty hard puzzle, 

2
00:00:03,418 --> 00:00:06,292
actually, but before I do, I want to lead with a spoiler, 

3
00:00:06,292 --> 00:00:09,958
which is the fact that the way we're going to solve this involves the use 

4
00:00:09,958 --> 00:00:10,900
of complex numbers.

5
00:00:11,560 --> 00:00:14,448
And once you hear it, you will agree that that seems absurd, 

6
00:00:14,448 --> 00:00:17,480
given that the puzzle is going to be purely a discrete question.

7
00:00:17,800 --> 00:00:20,260
It only asks about whole numbers and their sums.

8
00:00:20,660 --> 00:00:24,560
There's not a whiff of the imaginary or even continuity anywhere on the horizon.

9
00:00:25,280 --> 00:00:28,000
It's certainly not the only time that complex numbers are 

10
00:00:28,000 --> 00:00:30,720
unreasonably useful for discrete math, to borrow a phrase.

11
00:00:31,160 --> 00:00:34,685
The more famous example that I could bring up would be how the modern way that 

12
00:00:34,685 --> 00:00:36,961
mathematicians understand prime numbers, you know, 

13
00:00:36,961 --> 00:00:40,309
questions about how they're distributed, their density at certain regions, 

14
00:00:40,309 --> 00:00:43,879
things like that, well, it involves studying specially designed functions whose 

15
00:00:43,879 --> 00:00:45,620
inputs and outputs are complex numbers.

16
00:00:46,120 --> 00:00:49,360
Some of you may know that this is what the famous Riemann hypothesis is all about.

17
00:00:49,680 --> 00:00:52,788
Basically, there's a specially designed function, and on the face of it, 

18
00:00:52,788 --> 00:00:54,960
it looks unrelated to the discrete world of primes.

19
00:00:55,060 --> 00:00:57,000
It's smooth, it's complex valued.

20
00:00:57,000 --> 00:00:59,680
But under the hood, it encodes all of the information that 

21
00:00:59,680 --> 00:01:02,180
you could ever want about those discrete prime numbers.

22
00:01:02,600 --> 00:01:06,356
And most importantly, certain questions about primes are easier to answer by 

23
00:01:06,356 --> 00:01:10,600
analyzing this function than they would be by directly analyzing the primes themselves.

24
00:01:11,260 --> 00:01:14,002
Of course, our puzzle, which I promise I'll share in just a moment, 

25
00:01:14,002 --> 00:01:16,060
is a lot more innocent than the Riemann hypothesis.

26
00:01:16,260 --> 00:01:17,420
It's a toy problem.

27
00:01:17,880 --> 00:01:21,543
But at the end of the video, I'll share how the techniques that we use to solve it, 

28
00:01:21,543 --> 00:01:24,639
the real reason that we're here, are actually pretty similar in spirit 

29
00:01:24,639 --> 00:01:26,820
to the setup that leads to the Riemann hypothesis.

30
00:01:27,000 --> 00:01:30,180
And the prime number theorem and that whole circle of thoughts around it.

31
00:01:34,900 --> 00:01:39,380
Our puzzle for today comes from this book here by T2 Andrescu and Zhu Mingfeng.

32
00:01:39,480 --> 00:01:42,082
It's basically a collection of problems used in training 

33
00:01:42,082 --> 00:01:44,320
the USA team for the International Math Olympiad.

34
00:01:44,940 --> 00:01:47,386
And if we turn to chapter 2, Advanced Problems, 

35
00:01:47,386 --> 00:01:50,240
problem number 10 asks this seemingly innocent question.

36
00:01:50,920 --> 00:01:54,560
Find the number of subsets of the set 1 up to 2000, 

37
00:01:54,560 --> 00:01:57,640
the sum of whose elements is divisible by 5.

38
00:01:59,180 --> 00:02:01,420
Okay, so that might take a little bit of a moment to parse.

39
00:02:01,640 --> 00:02:05,320
For example, something like the set 3, 1, 4, that would be a subset.

40
00:02:05,660 --> 00:02:08,060
All of its elements are also elements in the big set.

41
00:02:08,580 --> 00:02:12,500
And its sum, 3 plus 1 plus 4 is 8, so that wouldn't be considered.

42
00:02:12,600 --> 00:02:13,540
That's not in our count.

43
00:02:13,840 --> 00:02:18,120
Whereas something like the set 2, 3, 5, also a subset, has a sum of 10.

44
00:02:18,440 --> 00:02:20,920
That is divisible by 5, so it's one that we want to count.

45
00:02:21,400 --> 00:02:24,471
The preview animation that I had at the start is essentially 

46
00:02:24,471 --> 00:02:27,140
a brute force program trying to answer this question.

47
00:02:27,720 --> 00:02:30,739
It will iterate through all of the different possible subsets, 

48
00:02:30,739 --> 00:02:34,861
finding the sum of each one along the way, and it increments a counter each time that 

49
00:02:34,861 --> 00:02:36,060
it finds a multiple of 5.

50
00:02:36,760 --> 00:02:39,569
And you know what, a nice warm-up question here would be to 

51
00:02:39,569 --> 00:02:42,520
pause and think about how many total subsets are there overall?

52
00:02:42,820 --> 00:02:44,160
Forget this multiple of 5 stuff.

53
00:02:44,420 --> 00:02:46,560
How long will it take for this program to terminate?

54
00:02:48,060 --> 00:02:51,500
Many of you may know, the answer is 2 to the power 2,000.

55
00:02:52,120 --> 00:02:55,216
The basic idea there is that when you're constructing a subset, 

56
00:02:55,216 --> 00:02:57,780
you have 2,000 different binary choices you can make.

57
00:02:58,000 --> 00:02:59,480
Do you include an element or do you not?

58
00:03:00,080 --> 00:03:02,984
And all of those choices are independent of each other, 

59
00:03:02,984 --> 00:03:07,444
so the total number of choices you have in constructing a subset is 2 times 2 times 2 

60
00:03:07,444 --> 00:03:09,000
times 2 on and on 2,000 times.

61
00:03:09,800 --> 00:03:13,240
And thinking about our program, that is a monstrously huge number.

62
00:03:13,620 --> 00:03:16,861
So even if we gave this brute forcing approach all the time in the universe, 

63
00:03:16,861 --> 00:03:19,892
with all the physical resources the universe could conceivably provide, 

64
00:03:19,892 --> 00:03:22,460
it wouldn't even come close, it wouldn't scratch the surface.

65
00:03:23,060 --> 00:03:25,180
Obviously we have to be a lot cleverer than that.

66
00:03:25,560 --> 00:03:28,950
And if you were to just guess what the answer should be, make a rough approximation, 

67
00:03:28,950 --> 00:03:32,340
you'd probably guess, you know, it should be around a fifth of all the total subsets.

68
00:03:32,540 --> 00:03:35,580
There's probably a roughly even distribution of all these sums mod 5.

69
00:03:36,000 --> 00:03:38,080
And yes, that is true, that's a decent approximation.

70
00:03:38,500 --> 00:03:42,220
But the heart of the question, the real challenge here, is to get a precise answer.

71
00:03:42,720 --> 00:03:45,392
This can't be the actual answer since it's not an integer, 

72
00:03:45,392 --> 00:03:48,200
but is the true answer a little bit more or a little bit less?

73
00:03:48,520 --> 00:03:50,340
Or maybe it's a lot more or a lot less.

74
00:03:50,600 --> 00:03:53,540
What tactics could you possibly use to figure out that error?

75
00:03:55,680 --> 00:03:59,540
To be clear, this lesson is definitely much more about the journey than the destination.

76
00:04:00,260 --> 00:04:02,820
Will you ever need to filter and count subsets in this way?

77
00:04:03,300 --> 00:04:05,160
Almost certainly not, I wouldn't expect so.

78
00:04:05,360 --> 00:04:08,753
But toy problem or not, it is a legitimately challenging question, 

79
00:04:08,753 --> 00:04:12,905
and navigating that challenge develops skills that are relevant to other sorts of 

80
00:04:12,905 --> 00:04:14,020
challenging questions.

81
00:04:14,020 --> 00:04:17,563
For you and me, there are at least two very surprising and very beautiful 

82
00:04:17,563 --> 00:04:20,820
twists and turns that the solution I'd like to share with you takes.

83
00:04:21,300 --> 00:04:25,110
I've already tipped my hand that complex numbers will make a surprise appearance, 

84
00:04:25,110 --> 00:04:28,037
but before we even get to that, there is another strange turn, 

85
00:04:28,037 --> 00:04:30,640
which is arguably even weirder and even more unexpected.

86
00:04:31,300 --> 00:04:34,457
To set the stage though, let's just get our bearings with the puzzle, 

87
00:04:34,457 --> 00:04:38,155
and do what all good problem solvers should do, and start with a simpler example, 

88
00:04:38,155 --> 00:04:40,320
maybe just trying it with the set 1, 2, 3, 4, 5.

89
00:04:40,980 --> 00:04:43,701
If you were solving this problem with pencil and paper, 

90
00:04:43,701 --> 00:04:45,986
you're one of these kids training for the IMO, 

91
00:04:45,986 --> 00:04:49,000
it's not a bad idea to simply list out all 2 to the 5 subsets.

92
00:04:49,340 --> 00:04:51,240
It's only 32, it's not that many.

93
00:04:55,680 --> 00:04:59,405
There's different ways that you might want to organize all of these in your mind, 

94
00:04:59,405 --> 00:05:01,814
but since the thing that we care about is their sum, 

95
00:05:01,814 --> 00:05:05,176
the natural thing to do would be to go through all of them one by one and 

96
00:05:05,176 --> 00:05:06,040
compute those sums.

97
00:05:06,520 --> 00:05:08,819
Over here, just doing it on YouTube, I've got a computer, 

98
00:05:08,819 --> 00:05:11,040
so I'll cheat a little and show what all their sums are.

99
00:05:11,040 --> 00:05:14,004
I'll also cheat a little bit and rearrange all of these, 

100
00:05:14,004 --> 00:05:17,800
organizing them suggestively into collections that all have the same sum.

101
00:05:18,500 --> 00:05:21,441
For instance, there are 3 distinct subsets that add up to 6, 

102
00:05:21,441 --> 00:05:25,442
and they'll all sit in this little box, and the 3 subsets adding up to 10 will all 

103
00:05:25,442 --> 00:05:26,600
live in this little box.

104
00:05:27,260 --> 00:05:31,250
And all in all, the ones that we care about, the subsets with a sum divisible by 5, 

105
00:05:31,250 --> 00:05:35,240
have been put over here on the left, and it looks like there's a total of 8 of them.

106
00:05:36,340 --> 00:05:39,718
Oh, and by the way, I should say we are counting the empty set, 

107
00:05:39,718 --> 00:05:43,520
we consider its sum to be 0, and we consider that to be a multiple of 5.

108
00:05:43,940 --> 00:05:47,340
By the end, I hope you'll agree all of those are abundantly natural choices to make.

109
00:05:48,140 --> 00:05:51,260
Take a moment to compare this answer to what you might expect heuristically.

110
00:05:51,800 --> 00:05:55,434
Out of all 32 total subsets, a fifth of that would have been 6.4, 

111
00:05:55,434 --> 00:06:00,060
so at least in this small example, the true answer is a little bit bigger than that.

112
00:06:00,360 --> 00:06:02,540
That's maybe something you want to talk in the back of your mind.

113
00:06:03,720 --> 00:06:06,016
Okay, and this is the part of the video where, 

114
00:06:06,016 --> 00:06:08,900
I'll be honest with you, I have no idea how to motivate it.

115
00:06:08,900 --> 00:06:12,533
Personally, I like it when math feels like something you could have discovered yourself, 

116
00:06:12,533 --> 00:06:15,227
and if you and I were sitting down together solving this problem, 

117
00:06:15,227 --> 00:06:17,800
I think there's all sorts of natural steps that you might take.

118
00:06:18,240 --> 00:06:21,795
Maybe you try to understand if there's some sort of structure to the subsets, 

119
00:06:21,795 --> 00:06:25,898
or you play around with how these sums are distributed mod 5 at many different iterations 

120
00:06:25,898 --> 00:06:29,864
for other small examples, and from that maybe you try to eke out some kind of proof by 

121
00:06:29,864 --> 00:06:30,320
induction.

122
00:06:31,040 --> 00:06:33,421
When I shared an early version of this lesson with some patrons, 

123
00:06:33,421 --> 00:06:35,400
people brought up some nice linear algebra approaches.

124
00:06:35,720 --> 00:06:37,580
All those are well and good, nothing wrong with those.

125
00:06:37,580 --> 00:06:41,660
But instead, my goal here is to teach you about something called a generating function.

126
00:06:42,120 --> 00:06:45,521
And it's one of those tactics where after the fact you can think, okay, 

127
00:06:45,521 --> 00:06:49,160
yeah, I get that this works, but how on earth would you have thought of that?

128
00:06:49,920 --> 00:06:51,140
Honestly, I don't know.

129
00:06:51,420 --> 00:06:55,247
There's a time in your life before you understand generating functions, and a time after, 

130
00:06:55,247 --> 00:06:58,480
and I can't think of anything that connects them other than a leap of faith.

131
00:06:59,380 --> 00:07:04,038
I'm going to ask you to consider the polynomial 1 plus x times 1 plus x squared 

132
00:07:04,038 --> 00:07:08,580
times 1 plus x cubed times 1 plus x to the fourth times 1 plus x to the fifth.

133
00:07:08,980 --> 00:07:11,540
Now, I know you could rightfully ask, where does this come from?

134
00:07:11,580 --> 00:07:13,160
What do polynomials have to do with things?

135
00:07:13,520 --> 00:07:16,340
What is the variable x even supposed to represent right now?

136
00:07:17,160 --> 00:07:19,120
And essentially x is purely a symbol.

137
00:07:19,440 --> 00:07:24,172
The only reason that we've written a polynomial here is that the act of algebraically 

138
00:07:24,172 --> 00:07:28,300
expanding it is going to completely mirror the act of constructing subsets.

139
00:07:28,300 --> 00:07:32,553
And, importantly, this grouping that we want, where subsets with the same 

140
00:07:32,553 --> 00:07:36,980
sum are all bunched together, kind of happens automatically when you do this.

141
00:07:37,400 --> 00:07:38,440
And let me show you what I mean.

142
00:07:39,020 --> 00:07:41,492
When you expand out this expression, it basically 

143
00:07:41,492 --> 00:07:43,520
comes down to making five binary choices.

144
00:07:43,800 --> 00:07:45,800
Which term from each parenthetical do you choose?

145
00:07:46,600 --> 00:07:49,313
If you choose the 1 from each of those parentheticals, 

146
00:07:49,313 --> 00:07:53,260
that will correspond to the empty set where we don't choose any of the elements.

147
00:07:53,980 --> 00:07:57,810
Whereas if I choose the x to the 1 term and then ones from everything else, 

148
00:07:57,810 --> 00:08:01,540
that will correspond to the singleton set that just contains the number 1.

149
00:08:02,200 --> 00:08:05,757
Similarly, if I choose the x squared term but ones from everything else, 

150
00:08:05,757 --> 00:08:08,000
that corresponds to the set just containing 2.

151
00:08:08,520 --> 00:08:12,320
Just choosing the x cubed term corresponds to the set just containing the number 3.

152
00:08:13,100 --> 00:08:16,450
But, interestingly, notice what happens if I choose the x to the 

153
00:08:16,450 --> 00:08:19,800
1 term and the x squared term and then ones from everything else.

154
00:08:20,280 --> 00:08:22,964
This corresponds to the choice of the subset that 

155
00:08:22,964 --> 00:08:25,380
has 1 and 2 and nothing from everything else.

156
00:08:25,380 --> 00:08:30,120
But in the polynomial, the way it expands looks like x cubed.

157
00:08:30,260 --> 00:08:35,360
So we have two different x cubed terms, each of which came from a subset whose sum was 3.

158
00:08:36,080 --> 00:08:38,740
And honestly, the pattern that I'm going for here is one that's 

159
00:08:38,740 --> 00:08:41,316
probably easiest if you just take the time to pause and think 

160
00:08:41,316 --> 00:08:44,059
through for yourself what happens when you expand everything here.

161
00:08:44,660 --> 00:08:49,020
Essentially, every possible subset corresponds to one of the terms in this expansion.

162
00:08:49,680 --> 00:08:53,362
And then the critical point is that the exponent in the term that you 

163
00:08:53,362 --> 00:08:56,940
get from that expansion equals the sum of that corresponding subset.

164
00:08:57,600 --> 00:08:59,940
Kind of confusing when you say it out loud, but again if you just 

165
00:08:59,940 --> 00:09:02,280
kind of think it through yourself I think you can see what I mean.

166
00:09:02,620 --> 00:09:06,957
For example, when all of the dust settles and we collect all 32 terms here, 

167
00:09:06,957 --> 00:09:10,552
three of those terms are x to the 10th, and each of those came 

168
00:09:10,552 --> 00:09:13,520
from a choice of elements whose sum was equal to 10.

169
00:09:14,540 --> 00:09:18,400
Now normally when we write a polynomial, we collect together all like terms.

170
00:09:18,680 --> 00:09:21,222
Instead of having three copies of x to the 10th, 

171
00:09:21,222 --> 00:09:24,440
we would just see the coefficient 3 in front of x to the 10th.

172
00:09:24,440 --> 00:09:27,231
So each of these coefficients is a way of encoding 

173
00:09:27,231 --> 00:09:29,640
the number of subsets with a particular sum.

174
00:09:30,460 --> 00:09:34,524
So this, like I said at the start, is an example of something called a generating 

175
00:09:34,524 --> 00:09:38,736
function, where the idea is if you have some question with an answer associated with 

176
00:09:38,736 --> 00:09:42,900
each positive integer, so in our case how many subsets add up to a particular value.

177
00:09:43,480 --> 00:09:47,600
When you construct a polynomial whose coefficients correspond to the answers to 

178
00:09:47,600 --> 00:09:51,567
that question, you can get a surprising amount of insight from your original 

179
00:09:51,567 --> 00:09:56,100
question by mathematically manipulating and analyzing the properties of this polynomial.

180
00:09:56,660 --> 00:09:59,548
There are tons and tons of examples of generating functions, 

181
00:09:59,548 --> 00:10:02,390
but just to bring up one other one which is especially fun, 

182
00:10:02,390 --> 00:10:04,900
you can use the same idea to study Fibonacci numbers.

183
00:10:05,340 --> 00:10:08,532
So all the coefficients of this polynomial will be Fibonacci numbers, 

184
00:10:08,532 --> 00:10:12,227
and in this case it's an infinite polynomial, so I should really be calling it a 

185
00:10:12,227 --> 00:10:12,820
power series.

186
00:10:13,520 --> 00:10:15,648
I won't fully explain the details here, but I will 

187
00:10:15,648 --> 00:10:17,860
leave them up on the screen for anyone who's curious.

188
00:10:18,220 --> 00:10:21,690
Basic idea is that the rule that's used to define Fibonacci numbers, 

189
00:10:21,690 --> 00:10:25,965
each one being the sum of the previous two, can be expressed as an equation in terms 

190
00:10:25,965 --> 00:10:26,820
of this function.

191
00:10:27,580 --> 00:10:31,200
That equation in turn lets you write that function in an alternate form.

192
00:10:32,180 --> 00:10:36,112
And then, and here's most of the details I'm skipping over, if you manipulate that, 

193
00:10:36,112 --> 00:10:39,155
you know, throw in a little partial fraction decomposition here, 

194
00:10:39,155 --> 00:10:41,776
a little bit of geometric series power expansion there, 

195
00:10:41,776 --> 00:10:45,662
you can get yourself an exact closed form expression for each individual Fibonacci 

196
00:10:45,662 --> 00:10:47,020
number, which is really cool.

197
00:10:47,580 --> 00:10:51,370
I mentioned this really just to show the tip of the iceberg of the fact that 

198
00:10:51,370 --> 00:10:55,260
this idea of a generating function goes way, way beyond our particular example.

199
00:10:56,460 --> 00:11:00,705
Now, in our particular problem, if we extend from the simple example with 

200
00:11:00,705 --> 00:11:04,320
just 12345 to the big example with all the numbers up to 2000, 

201
00:11:04,320 --> 00:11:09,139
our corresponding generating function involves these 2000 different binomial terms, 

202
00:11:09,139 --> 00:11:13,500
you know, 1 plus x, 1 plus x squared, on and on, up to 1 plus x to the 2000.

203
00:11:13,500 --> 00:11:16,411
And the idea is that if you were to expand this, 

204
00:11:16,411 --> 00:11:19,560
the coefficients tell us all the information we want.

205
00:11:20,060 --> 00:11:22,203
Now, it would be insane to actually expand it, 

206
00:11:22,203 --> 00:11:25,214
but it is helpful to keep in the back of your mind, in principle, 

207
00:11:25,214 --> 00:11:26,400
what that would look like.

208
00:11:26,800 --> 00:11:29,495
For example, in principle, if you expanded it, 

209
00:11:29,495 --> 00:11:34,600
you would find that the coefficient in front of the x to the 25th term happens to be 142.

210
00:11:35,520 --> 00:11:38,748
And this corresponds to the fact that there are 

211
00:11:38,748 --> 00:11:41,640
142 distinct subsets that have a sum of 25.

212
00:11:42,280 --> 00:11:46,614
So the art of analyzing a generating function here will be to deduce 

213
00:11:46,614 --> 00:11:51,200
facts about these coefficients without actually expanding the expression.

214
00:11:55,880 --> 00:11:59,941
So moving forward, I'm just going to write this expansion more abstractly, 

215
00:11:59,941 --> 00:12:04,761
just a sum from n equals 0 up to capital N, where c sub n tells us the coefficients that 

216
00:12:04,761 --> 00:12:05,520
we don't know.

217
00:12:05,880 --> 00:12:08,060
All of that starts off as a black box to us.

218
00:12:08,360 --> 00:12:11,543
And moving forward, we're going to start treating this as an actual function, 

219
00:12:11,543 --> 00:12:14,562
something where we plug in x, we see what the output is, and then we ask, 

220
00:12:14,562 --> 00:12:16,440
what does that tell us about the coefficients?

221
00:12:17,060 --> 00:12:20,620
For example, a very easy input would be to plug in something like x equals 0.

222
00:12:21,120 --> 00:12:25,100
In that case, importantly, we know how to evaluate it using the factored form above.

223
00:12:25,380 --> 00:12:29,051
If you plug in x equals 0 for everything, all of the terms look like 1, 

224
00:12:29,051 --> 00:12:30,020
so the answer is 1.

225
00:12:30,360 --> 00:12:34,130
And in the expanded form, all of those terms involving an x will get killed, 

226
00:12:34,130 --> 00:12:37,020
they go to 0, leaving us just with the first term, c sub 0.

227
00:12:37,800 --> 00:12:40,600
Now, in this case, that doesn't really tell us anything all that exciting.

228
00:12:40,600 --> 00:12:43,817
It essentially translates to saying there is a single empty set, 

229
00:12:43,817 --> 00:12:45,600
but we're just getting our feet wet.

230
00:12:46,040 --> 00:12:49,640
As the next example, take a moment to think about evaluating f at 1.

231
00:12:50,460 --> 00:12:53,544
This is something we can do with the expression we know, 

232
00:12:53,544 --> 00:12:57,927
when you plug in 1 for all of these x's, every term looks like a 2, so in total, 

233
00:12:57,927 --> 00:13:00,200
we get 2 multiplied by itself 2,000 times.

234
00:13:00,720 --> 00:13:04,522
On the other hand, in the expanded expression, if you plug in x equals 1, 

235
00:13:04,522 --> 00:13:09,147
all of these powers of x go to 1, so we're essentially adding up all of the coefficients, 

236
00:13:09,147 --> 00:13:11,460
which is pretty cool when you think about it.

237
00:13:11,740 --> 00:13:14,302
Just by evaluating the function at a single number, 

238
00:13:14,302 --> 00:13:17,160
we can deduce what the sum of all of the coefficients are.

239
00:13:17,680 --> 00:13:21,174
Now, again, in our particular example, it's not all that exciting, 

240
00:13:21,174 --> 00:13:24,460
because we already know what the sum of these coefficients are.

241
00:13:24,960 --> 00:13:28,351
Remember, each coefficient counts how many subsets have a certain sum, 

242
00:13:28,351 --> 00:13:31,648
and so when you add them up, we're just counting all of the subsets, 

243
00:13:31,648 --> 00:13:33,320
which we know to be 2 to the 2,000.

244
00:13:34,220 --> 00:13:36,717
However, I can give you a genuinely new fact if 

245
00:13:36,717 --> 00:13:39,320
I ask you to evaluate this function at negative 1.

246
00:13:39,720 --> 00:13:41,220
Take a moment to think about what that means.

247
00:13:43,340 --> 00:13:46,339
If you plug in negative 1, again, we start with the thing we know, 

248
00:13:46,339 --> 00:13:50,100
the factored expression up top, and here, all you need is to look at the first term.

249
00:13:50,440 --> 00:13:53,232
When you plug in x, the first parenthetical goes to 0, 

250
00:13:53,232 --> 00:13:55,060
so the whole expression has to be 0.

251
00:13:55,640 --> 00:13:58,886
But what does that tell you when we apply it to the expanded expression, 

252
00:13:58,886 --> 00:14:00,220
using all of the coefficients?

253
00:14:00,720 --> 00:14:04,103
And in the spirit of being as suggestive as possible of the strange 

254
00:14:04,103 --> 00:14:07,437
turns that this solution takes, I want you to really visualize the 

255
00:14:07,437 --> 00:14:10,920
various powers of negative 1 in this expression in terms of rotations.

256
00:14:11,460 --> 00:14:13,828
The first term, negative 1 to the 0, is just 1, 

257
00:14:13,828 --> 00:14:16,000
which we'll picture as a vector from 0 to 1.

258
00:14:16,580 --> 00:14:20,076
Then negative 1 to the first power is just negative 1 itself, 

259
00:14:20,076 --> 00:14:25,040
which I want you to be thinking about as a 180-degree rotation away from that last term.

260
00:14:25,540 --> 00:14:28,300
Then when we take negative 1 squared, that's positive 1.

261
00:14:28,540 --> 00:14:30,580
Again, a 180-degree rotation.

262
00:14:30,580 --> 00:14:35,820
And in general, each successive term here looks like another rotation by 180 degrees.

263
00:14:36,180 --> 00:14:39,954
Algebraically, what this translates to is that we have an oscillating sum between the 

264
00:14:39,954 --> 00:14:43,860
even coefficients and the odd coefficients, but keep the visual in the back of your mind.

265
00:14:44,260 --> 00:14:47,526
This expression is true for any generating function, but again, 

266
00:14:47,526 --> 00:14:51,814
for our special generating function, we know that this value, this alternating sum, 

267
00:14:51,814 --> 00:14:52,580
should equal 0.

268
00:14:53,040 --> 00:14:55,970
And a way you can interpret that is that it's telling you there's an 

269
00:14:55,970 --> 00:14:58,900
equal balance between the even coefficients and the odd coefficients.

270
00:14:59,460 --> 00:15:02,990
And remember, maybe in the context of our smaller example, 

271
00:15:02,990 --> 00:15:06,520
these coefficients are encoding for us facts about subsets.

272
00:15:06,760 --> 00:15:10,074
So if there's an equal balance between all those even coefficients 

273
00:15:10,074 --> 00:15:14,527
and the odd coefficients, it's telling you that half of all the subsets have an even sum, 

274
00:15:14,527 --> 00:15:16,160
and half of them have an odd sum.

275
00:15:16,660 --> 00:15:19,943
That's probably what you would expect, but it's not obvious at first how you 

276
00:15:19,943 --> 00:15:23,440
would show that, and with the generating function, it just kind of pops right out.

277
00:15:24,480 --> 00:15:27,121
And again, to be suggestive of where we're going, 

278
00:15:27,121 --> 00:15:31,189
let me rewrite this a little bit by taking the last two things we evaluated, 

279
00:15:31,189 --> 00:15:33,620
add up those two, and then divide by one half.

280
00:15:35,100 --> 00:15:38,164
If you think about it, this is a way of filtering out all of 

281
00:15:38,164 --> 00:15:41,280
the even coefficients and killing all of the odd coefficients.

282
00:15:41,900 --> 00:15:45,191
So it becomes an especially clean way to write the fact that the sum of 

283
00:15:45,191 --> 00:15:48,528
all of the even coefficients, which again in the back of your mind means 

284
00:15:48,528 --> 00:15:52,140
the total number of subsets with an even sum, will look like half of the total.

285
00:15:52,620 --> 00:15:57,100
This is, needless to say, tantalizingly close to the actual question we want to answer.

286
00:15:57,100 --> 00:16:01,570
What we would like to do is find some clever thing that we can do to the function f, 

287
00:16:01,570 --> 00:16:04,883
some well-chosen numbers to evaluate it on, so that we get all 

288
00:16:04,883 --> 00:16:07,460
the coefficients corresponding to multiples of 5.

289
00:16:08,000 --> 00:16:10,772
Again, thinking back to what these coefficients encode for us, 

290
00:16:10,772 --> 00:16:12,620
that will be answering our final question.

291
00:16:12,760 --> 00:16:16,860
That will be counting the total number of subsets whose sum is divisible by 5.

292
00:16:18,900 --> 00:16:21,872
The trick to doing this is to generalize what we just did, 

293
00:16:21,872 --> 00:16:25,400
where the successive powers of the input were rotating back and forth.

294
00:16:25,900 --> 00:16:28,836
But this time we don't want them to rotate every other time, 

295
00:16:28,836 --> 00:16:31,340
we'd like them to somehow rotate with a period of 5.

296
00:16:31,740 --> 00:16:34,220
And to do that, we extend into the complex plane.

297
00:16:34,640 --> 00:16:39,407
You see, up there we can find a value so that as we take successive powers of it, 

298
00:16:39,407 --> 00:16:44,000
it will rotate by a fifth of a turn, giving us a process with a frequency of 5.

299
00:16:44,700 --> 00:16:47,168
And if you step back, I know that it's kind of absurd 

300
00:16:47,168 --> 00:16:49,500
that I'm asking you to think about complex numbers.

301
00:16:49,860 --> 00:16:52,906
I mean, we started with a counting question, it's discrete math, 

302
00:16:52,906 --> 00:16:54,640
but hopefully it's not all that wild.

303
00:16:55,400 --> 00:16:59,599
And again, the reason that I'm drawing things out to tee up the various strange turns in 

304
00:16:59,599 --> 00:17:03,800
the solution is that they're actually not all that strange in the broader scheme of math.

305
00:17:04,140 --> 00:17:08,302
The trick we're about to apply has a heavy resemblance to many other instances 

306
00:17:08,302 --> 00:17:12,359
of using complex numbers to better understand discrete questions of integers.

307
00:17:12,740 --> 00:17:16,374
So the more it feels like something that you could have discovered yourself, 

308
00:17:16,374 --> 00:17:19,773
the more it might actually be the case that when you're working on some 

309
00:17:19,773 --> 00:17:23,220
future problem in this circle of thoughts, you will discover it yourself.

310
00:17:28,560 --> 00:17:32,373
The complex number To be specific, the complex number that I care about is one 

311
00:17:32,373 --> 00:17:36,380
that I'm going to label zeta, and it sits a fifth of a turn around the unit circle.

312
00:17:36,780 --> 00:17:41,340
So its angle is 2 pi fifths radians, and its magnitude is one.

313
00:17:42,060 --> 00:17:45,124
This means with the standard Euler's formula notation, 

314
00:17:45,124 --> 00:17:49,360
we would write that number explicitly as e to the power 2 pi i divided by 5.

315
00:17:49,640 --> 00:17:52,408
If you're not as comfortable with that notation, 

316
00:17:52,408 --> 00:17:56,927
you could think of it as something whose real part is the cosine of 72 degrees, 

317
00:17:56,927 --> 00:18:01,560
72 being a fifth of a full turn, and the imaginary part is the sine of 72 degrees.

318
00:18:02,540 --> 00:18:05,940
But to be honest, you don't actually need to think about the explicit value.

319
00:18:06,200 --> 00:18:10,580
Instead, the important thing to focus on is the property that powers of this number have.

320
00:18:11,100 --> 00:18:14,246
For example, when you square it, because its magnitude was one, 

321
00:18:14,246 --> 00:18:17,541
the magnitude of its square is also one, but it rotates a fifth of 

322
00:18:17,541 --> 00:18:21,180
a turn around the unit circle, so it now sits two fifths of a turn around.

323
00:18:22,280 --> 00:18:24,397
Similarly, when you raise it to the third power, 

324
00:18:24,397 --> 00:18:27,508
you end up three fifths of a turn around, raise it to the fourth power, 

325
00:18:27,508 --> 00:18:30,402
you end up four fifths of a turn, and raise it to the fifth power, 

326
00:18:30,402 --> 00:18:32,520
and you've gotten all the way back around to one.

327
00:18:32,860 --> 00:18:35,600
It's the same thing as if you had raised it to the zeroth power.

328
00:18:35,800 --> 00:18:37,600
We get this cycling every five terms.

329
00:18:37,860 --> 00:18:39,200
That's the thing that we care about.

330
00:18:39,760 --> 00:18:43,622
These numbers have a special name, they're called the fifth roots of unity, 

331
00:18:43,622 --> 00:18:47,180
essentially because they solve the equation z to the fifth equals one.

332
00:18:47,180 --> 00:18:49,240
They are fifth roots of the number one.

333
00:18:49,460 --> 00:18:51,891
If you just presented someone with this equation, 

334
00:18:51,891 --> 00:18:54,760
they would probably say the answer is clearly z equals one.

335
00:18:55,280 --> 00:18:58,520
But the idea is that there are four other answers in the complex plane.

336
00:18:58,980 --> 00:19:01,412
Four other numbers where when you raise them to the fifth, 

337
00:19:01,412 --> 00:19:04,380
you get one, and considering them as a collective is often quite useful.

338
00:19:04,880 --> 00:19:07,440
Remember that equation, it'll come back for us a little bit later.

339
00:19:08,700 --> 00:19:12,262
So in analogy with what we did earlier, where we added together f of 

340
00:19:12,262 --> 00:19:15,980
one and f of negative one to get this cancellation among the odd terms, 

341
00:19:15,980 --> 00:19:19,440
what we're going to do is evaluate f at all five of these numbers, 

342
00:19:19,440 --> 00:19:22,900
and then add them together, and hopefully we get some cancellation.

343
00:19:23,240 --> 00:19:27,195
That might seem kind of complicated, but let's just take a super simple example, 

344
00:19:27,195 --> 00:19:29,540
like the case where f of x is simply equal to x.

345
00:19:30,000 --> 00:19:31,995
In that case, when we add up these five terms, 

346
00:19:31,995 --> 00:19:34,160
we're just adding up the roots of unity themselves.

347
00:19:34,520 --> 00:19:37,680
Zeta to the zero plus zeta to the one, on and on, up to zeta to the fourth.

348
00:19:38,240 --> 00:19:40,315
When you add complex numbers, you can think of 

349
00:19:40,315 --> 00:19:42,480
it like vector addition with the tip to the tail.

350
00:19:42,900 --> 00:19:47,973
So zeta to the zero plus zeta will look like this, and then if I add on zeta squared, 

351
00:19:47,973 --> 00:19:52,280
bringing the tail of that vector to the tip of the last one, we get this.

352
00:19:52,980 --> 00:19:57,159
Then similarly, if I bring the tail of zeta cubed over to the tip of that one, 

353
00:19:57,159 --> 00:20:00,333
and then do likewise for zeta to the fourth, you'll see how 

354
00:20:00,333 --> 00:20:02,820
the overall sum actually loops back to be zero.

355
00:20:03,360 --> 00:20:05,770
Another way to think about this is that all five of 

356
00:20:05,770 --> 00:20:08,320
these terms are evenly balanced around the number zero.

357
00:20:08,880 --> 00:20:10,620
Their center of mass is at the origin.

358
00:20:11,700 --> 00:20:16,460
Now it's helpful to think about a slightly less trivial example, if f of x was x squared.

359
00:20:17,360 --> 00:20:20,020
So when you square zeta to the zero, it stays zeta to the zero.

360
00:20:20,260 --> 00:20:21,980
This is just a fancy way of saying the number one.

361
00:20:22,640 --> 00:20:24,980
When you square zeta, you get zeta squared itself.

362
00:20:25,440 --> 00:20:30,240
So you might imagine this dot up here moving over to the zeta squared dot when we do it.

363
00:20:30,720 --> 00:20:32,680
Zeta squared moves to zeta to the fourth.

364
00:20:33,200 --> 00:20:35,760
You might imagine this dot moving over to zeta to the fourth.

365
00:20:36,580 --> 00:20:41,042
Zeta cubed moves to zeta to the sixth, which, because we loop around every five times, 

366
00:20:41,042 --> 00:20:42,940
is the same thing as zeta to the one.

367
00:20:43,420 --> 00:20:44,880
So this dot will move up here.

368
00:20:46,420 --> 00:20:50,453
And finally, zeta to the fourth squares to give us zeta to the eighth, 

369
00:20:50,453 --> 00:20:54,600
which reduces to be the same as zeta cubed, which I might draw like this.

370
00:20:55,560 --> 00:20:57,853
That might seem a little confusing to think about, 

371
00:20:57,853 --> 00:21:00,102
especially with all the arrows I have drawn here, 

372
00:21:00,102 --> 00:21:02,800
but it's worth thinking through at least once in your life, 

373
00:21:02,800 --> 00:21:05,094
because the idea here is that when we square this, 

374
00:21:05,094 --> 00:21:09,141
like go to all of these different terms, and I program them to double the angle that they 

375
00:21:09,141 --> 00:21:11,660
have, the overall effect is to just shuffle those terms.

376
00:21:12,000 --> 00:21:14,511
We get the same numbers but written in a different order, 

377
00:21:14,511 --> 00:21:16,200
so their sum is still going to be zero.

378
00:21:16,960 --> 00:21:21,273
Similarly, if you go through this exercise with x cubed, which I encourage you to do, 

379
00:21:21,273 --> 00:21:24,885
and you follow around where are each one of these dots going to end up, 

380
00:21:24,885 --> 00:21:27,543
you'll be able to see that when we cube these terms, 

381
00:21:27,543 --> 00:21:31,054
when we take each one and we multiply the angle that it has by three, 

382
00:21:31,054 --> 00:21:32,760
again we just shuffle them around.

383
00:21:33,140 --> 00:21:37,432
Same terms listed in a different order, unsurprisingly the same 

384
00:21:37,432 --> 00:21:41,993
thing happens if our function was x to the fourth, but, critically, 

385
00:21:41,993 --> 00:21:46,420
where things change is if we consider the function x to the fifth.

386
00:21:47,060 --> 00:21:51,820
In that case, when you raise zeta to the fifth power, by definition it goes to one.

387
00:21:52,540 --> 00:21:55,200
Similarly, zeta squared raised to the fifth power goes to one.

388
00:21:55,560 --> 00:21:57,904
All of these go to one, they are the roots of unity, 

389
00:21:57,904 --> 00:21:59,940
this is after all their whole purpose in life.

390
00:22:00,440 --> 00:22:03,685
So in this case, when we apply the function and add them all up, 

391
00:22:03,685 --> 00:22:06,232
instead of going to zero and getting cancellation, 

392
00:22:06,232 --> 00:22:08,380
we get a kind of constructive interference.

393
00:22:08,780 --> 00:22:11,440
All of them equal one, so their sum is equal to five.

394
00:22:12,060 --> 00:22:15,533
So if you step back and think about what all those examples mean, 

395
00:22:15,533 --> 00:22:19,954
essentially this expression is something that will go to zero for powers of x which 

396
00:22:19,954 --> 00:22:24,322
are not divisible by five, but it goes to something non-zero for powers of x which 

397
00:22:24,322 --> 00:22:25,480
are divisible by five.

398
00:22:25,900 --> 00:22:28,380
And that's exactly the kind of filter that we're looking for.

399
00:22:29,020 --> 00:22:32,961
If you're worried that our actual function is much more complicated than a simple 

400
00:22:32,961 --> 00:22:37,000
power of x, essentially things play really nicely here because everything is linear.

401
00:22:37,700 --> 00:22:41,755
If f is some massive polynomial and we want to evaluate this big sum, 

402
00:22:41,755 --> 00:22:44,711
you could sort of think of going column by column, 

403
00:22:44,711 --> 00:22:48,303
where each time you really are just adding up powers of zeta, 

404
00:22:48,303 --> 00:22:52,938
and in most cases all those powers cancel out with each other and you get zero, 

405
00:22:52,938 --> 00:22:55,951
but when all of those powers are multiples of five, 

406
00:22:55,951 --> 00:23:01,050
they constructively interfere and instead you get five times whatever the corresponding 

407
00:23:01,050 --> 00:23:01,920
coefficient is.

408
00:23:02,040 --> 00:23:05,888
Deep in the weeds it's easy to forget why we're here in the first place, 

409
00:23:05,888 --> 00:23:09,947
but remember each one of those coefficients tells us how many subsets add up 

410
00:23:09,947 --> 00:23:14,006
to a certain value, and so what we want is to add up all of the coefficients 

411
00:23:14,006 --> 00:23:18,540
that are multiples of five, and what we have right now is a way to explicitly do that.

412
00:23:18,800 --> 00:23:22,131
If we evaluate this function on these five different roots of unity, 

413
00:23:22,131 --> 00:23:25,029
which I know seems kind of weird, then all we have to do is 

414
00:23:25,029 --> 00:23:27,540
divide by five and it gives us the sum that we want.

415
00:23:28,480 --> 00:23:30,220
That's really cool if you ask me.

416
00:23:30,220 --> 00:23:34,525
We have a question that's just about subsets, it's a discrete math problem, 

417
00:23:34,525 --> 00:23:37,980
and yet the way that we can answer it is to evaluate a crazy 

418
00:23:37,980 --> 00:23:41,040
polynomial on some judiciously chosen complex numbers.

419
00:23:41,520 --> 00:23:43,642
The more math you do the less crazy that seems, 

420
00:23:43,642 --> 00:23:46,959
because complex numbers have this bizarre relationship with discrete math, 

421
00:23:46,959 --> 00:23:49,480
but it really is wonderful, there's no two ways about it.

422
00:23:50,340 --> 00:23:54,219
However, some of you might complain, the only way that this is useful 

423
00:23:54,219 --> 00:23:58,100
is if we can actually evaluate this wild expression on our polynomial.

424
00:23:58,620 --> 00:24:02,262
Remember, the form of the polynomial we know, the one we're comfortable with, 

425
00:24:02,262 --> 00:24:05,718
is the factored form, where you have this one plus x, one plus x squared, 

426
00:24:05,718 --> 00:24:08,520
on and on, all the way up to one plus x to the two thousand.

427
00:24:09,220 --> 00:24:12,302
Everything up to this point is just meaningless symbolic play, 

428
00:24:12,302 --> 00:24:15,239
pushing around one hard problem into another, unless we can 

429
00:24:15,239 --> 00:24:18,420
actually roll up our sleeves and do some honest calculation here.

430
00:24:18,900 --> 00:24:22,320
This is the final thrust in our argument, so step back, take a deep breath.

431
00:24:22,700 --> 00:24:26,692
It's actually not as bad as you might think, but let's start just by thinking about 

432
00:24:26,692 --> 00:24:30,780
how you might evaluate just one of the roots of unity that we need, maybe zeta itself.

433
00:24:31,780 --> 00:24:35,093
So what that looks like is one plus zeta, times one plus zeta squared, 

434
00:24:35,093 --> 00:24:36,820
times one plus zeta cubed, on and on.

435
00:24:37,060 --> 00:24:39,674
Except, importantly, after those first five terms, 

436
00:24:39,674 --> 00:24:42,700
everything starts repeating, because powers of zeta repeat.

437
00:24:43,220 --> 00:24:46,220
The entire expression up to two thousand is basically just 

438
00:24:46,220 --> 00:24:49,120
going to be a copy of this expression four hundred times.

439
00:24:49,600 --> 00:24:52,073
It still might seem hard to evaluate this expression, 

440
00:24:52,073 --> 00:24:55,280
but it's way easier than multiplying out two thousand different terms.

441
00:24:55,280 --> 00:24:59,470
A way you might visualize this is that we're taking each one of those roots of unity, 

442
00:24:59,470 --> 00:25:02,540
but basically adding one, we're shifting them all to the right.

443
00:25:03,060 --> 00:25:05,844
This picture actually lends itself to a really nice geometric 

444
00:25:05,844 --> 00:25:08,360
intuition for the numerical answer that we might expect.

445
00:25:08,880 --> 00:25:13,046
The thing that we want is the product of these five different complex numbers, 

446
00:25:13,046 --> 00:25:14,260
these five yellow dots.

447
00:25:14,820 --> 00:25:17,520
And if you know a thing or two about complex numbers, 

448
00:25:17,520 --> 00:25:21,669
since these come in conjugate pairs, all we really need is to multiply the lengths 

449
00:25:21,669 --> 00:25:23,020
of these five yellow lines.

450
00:25:23,680 --> 00:25:28,633
For example, that dot furthest to the right corresponds to one plus zeta to the fifth, 

451
00:25:28,633 --> 00:25:32,220
which in the diagram I'm labeling as zeta to the zero plus one.

452
00:25:32,720 --> 00:25:34,580
But it doesn't matter, in either case, they're 

453
00:25:34,580 --> 00:25:36,440
both just fancy ways of writing the number two.

454
00:25:36,980 --> 00:25:40,813
Next to that, we have the values one plus zeta and one plus zeta to the fourth, 

455
00:25:40,813 --> 00:25:44,600
both of which have the same magnitude, the lengths of these lines are the same.

456
00:25:44,940 --> 00:25:46,680
And let's just give that a name, L1.

457
00:25:47,080 --> 00:25:50,280
So we need to multiply two different copies of that length, L1 squared.

458
00:25:51,020 --> 00:25:55,156
Similarly, the remaining two values, zeta squared plus one and zeta cubed plus one, 

459
00:25:55,156 --> 00:25:58,160
they also have the same length, and they're a conjugate pair.

460
00:25:58,580 --> 00:26:00,200
So let's just call that length L2.

461
00:26:00,880 --> 00:26:03,800
So our product needs to include two copies of that L2.

462
00:26:04,340 --> 00:26:06,803
If we were just making a loose heuristic guess, 

463
00:26:06,803 --> 00:26:11,114
you might notice that L1 is a length that's something a little bit longer than one, 

464
00:26:11,114 --> 00:26:13,680
and L2 is something a little bit shorter than one.

465
00:26:13,960 --> 00:26:17,260
So the final answer here probably comes to something around two-ish, 

466
00:26:17,260 --> 00:26:19,700
we're not positive, but something in that ballpark.

467
00:26:19,700 --> 00:26:24,140
To turn this into an exact answer, we could just expand out the full expression.

468
00:26:24,520 --> 00:26:27,420
It's honestly not that bad, there's only 32 different terms.

469
00:26:33,320 --> 00:26:37,020
Okay, you've hung with me for a long time now, and I know that it's getting to be a lot.

470
00:26:37,280 --> 00:26:40,001
But there's one final trick in this whole argument that makes 

471
00:26:40,001 --> 00:26:42,680
our last step much simpler than you might think it should be.

472
00:26:43,260 --> 00:26:45,620
And let's just recap to remind ourselves of where we are.

473
00:26:45,820 --> 00:26:49,217
So we started with this question asking us, count the number 

474
00:26:49,217 --> 00:26:52,280
of subsets of 1 up to 2000 whose sum is divisible by 5.

475
00:26:52,740 --> 00:26:55,916
We then constructed this polynomial whose coefficients tell 

476
00:26:55,916 --> 00:26:59,040
us how many subsets have a particular sum for each value n.

477
00:26:59,960 --> 00:27:03,620
So what we want is to add up every fifth coefficient of that polynomial.

478
00:27:04,780 --> 00:27:09,085
Then we saw how evaluating this polynomial as a function on all of the fifth roots 

479
00:27:09,085 --> 00:27:13,340
of unity, then adding them up, ends up giving us exactly this filter that we want.

480
00:27:13,600 --> 00:27:16,603
And here we're evaluating just one of those terms, f of zeta, 

481
00:27:16,603 --> 00:27:19,800
which essentially comes down to a product of five complex numbers.

482
00:27:20,540 --> 00:27:24,640
As a super slick way to actually evaluate that product, here's the final trick.

483
00:27:25,320 --> 00:27:27,820
Remember, I described these numbers as roots of unity.

484
00:27:28,200 --> 00:27:30,580
They solve the equation z to the fifth equals one.

485
00:27:31,060 --> 00:27:33,620
Another way to think about that is that they are 

486
00:27:33,620 --> 00:27:36,180
roots of the polynomial z to the fifth minus one.

487
00:27:36,920 --> 00:27:41,110
Now what that means is we can factor the polynomial z to the fifth minus one to 

488
00:27:41,110 --> 00:27:45,300
look like this, where there's one factor corresponding to each one of the roots.

489
00:27:45,300 --> 00:27:47,160
You take z minus each one of the roots.

490
00:27:47,840 --> 00:27:51,393
This expression is kind of magical when you think about all of the crazy 

491
00:27:51,393 --> 00:27:54,313
cancellation that has to happen when you expand it all out, 

492
00:27:54,313 --> 00:27:56,990
but it is true and it's super useful for us right now, 

493
00:27:56,990 --> 00:28:00,689
because the expression on the right hand side looks almost identical to the 

494
00:28:00,689 --> 00:28:02,880
thing we need to evaluate up at the top here.

495
00:28:03,300 --> 00:28:06,360
It basically just has minus signs where we wish there were plus signs.

496
00:28:07,680 --> 00:28:10,240
The trick is to plug in z equals negative one.

497
00:28:10,800 --> 00:28:13,900
If you do that, you essentially have the negative of what we want.

498
00:28:13,900 --> 00:28:17,904
If you multiply it by negative one, notice how the left hand side here, 

499
00:28:17,904 --> 00:28:22,520
which started out as negative one minus one or negative two, that just becomes two.

500
00:28:23,240 --> 00:28:26,320
And then the right hand side turns into the thing that we want to evaluate.

501
00:28:27,000 --> 00:28:30,519
So just as our geometric intuition earlier might have suggested, 

502
00:28:30,519 --> 00:28:34,742
not only is the answer around two, the answer quite magically turns out to be 

503
00:28:34,742 --> 00:28:35,500
precisely two.

504
00:28:36,380 --> 00:28:40,059
That is actually super nice and very lovely, because it means this bigger 

505
00:28:40,059 --> 00:28:43,590
expression that we want to evaluate, where we're adding up f on all of 

506
00:28:43,590 --> 00:28:47,320
the different roots of unity, we know its value on the first root of unity.

507
00:28:47,580 --> 00:28:49,220
It will be two to the power four hundred.

508
00:28:49,820 --> 00:28:52,784
Essentially identical reasoning shows that its value on the next 

509
00:28:52,784 --> 00:28:55,521
three roots of unity is also two to the power four hundred, 

510
00:28:55,521 --> 00:28:58,668
because remember when you take powers of zeta squared or zeta cubed, 

511
00:28:58,668 --> 00:29:02,180
you get the same list of numbers that are just shuffled in a different order.

512
00:29:02,880 --> 00:29:06,120
The only one that's different is when we evaluate it as zeta to the zero.

513
00:29:06,840 --> 00:29:09,952
But zeta to the zero is a fancy way of saying the number one, 

514
00:29:09,952 --> 00:29:11,960
and we know how to evaluate this at one.

515
00:29:12,220 --> 00:29:13,080
That's one of the easy things.

516
00:29:13,140 --> 00:29:13,900
We did this earlier.

517
00:29:14,200 --> 00:29:17,014
All of these parentheticals turn into two, so it looks 

518
00:29:17,014 --> 00:29:19,880
like taking two multiplied by itself two thousand times.

519
00:29:20,520 --> 00:29:23,491
And so finally with that, we have a highly explicit 

520
00:29:23,491 --> 00:29:25,720
honest answer to our counting question.

521
00:29:26,160 --> 00:29:29,884
To add up all of these coefficients which are divisible by five, 

522
00:29:29,884 --> 00:29:34,984
which remember is a way of counting how many total subsets have a sum divisible by five, 

523
00:29:34,984 --> 00:29:38,308
the answer is one fifth of this weird complex expression, 

524
00:29:38,308 --> 00:29:42,892
which we just computed to be two to the two thousand plus four different copies 

525
00:29:42,892 --> 00:29:44,440
of two to the four hundred.

526
00:29:45,520 --> 00:29:47,629
And here you might want to do just a quick sanity 

527
00:29:47,629 --> 00:29:49,360
check on does this answer make any sense.

528
00:29:50,040 --> 00:29:54,565
For example, if you do it in the smaller case with the set one two three four five, 

529
00:29:54,565 --> 00:29:57,905
and you walk through all the same reasoning that we just did, 

530
00:29:57,905 --> 00:30:01,299
it tells you that the answer is one fifth of two to the fifth, 

531
00:30:01,299 --> 00:30:05,286
the total number of subsets, plus four times two to the one in this case, 

532
00:30:05,286 --> 00:30:07,980
which is a fifth of 32 plus eight, which is eight.

533
00:30:08,440 --> 00:30:12,420
And if you'll remember when we explicitly looked at them all, that was in fact the answer.

534
00:30:17,500 --> 00:30:20,900
Look, this is a hard puzzle, and when it's worth putting in the time to 

535
00:30:20,900 --> 00:30:24,300
solve a hard problem, it's also worth taking some time to reflect on it.

536
00:30:24,420 --> 00:30:25,200
What do you get out of this?

537
00:30:29,640 --> 00:30:33,377
What's indeed one fifth of all the total subsets like we might have guessed, 

538
00:30:33,377 --> 00:30:36,581
and how this error term came about from the not quite destructive 

539
00:30:36,581 --> 00:30:39,300
interference in a massive combination of roots of unity.

540
00:30:40,120 --> 00:30:43,951
But again, what makes this question interesting is not the answer, 

541
00:30:43,951 --> 00:30:48,640
it's the way that we solved it, namely taking a discrete sequence that we want to 

542
00:30:48,640 --> 00:30:52,300
understand and treating it as the coefficients on a polynomial, 

543
00:30:52,300 --> 00:30:55,160
then evaluating that polynomial on complex values.

544
00:30:55,740 --> 00:30:58,931
Both of those steps are probably highly unexpected at the outset, 

545
00:30:58,931 --> 00:31:03,187
but both of those steps relate to some very general and powerful techniques that you'll 

546
00:31:03,187 --> 00:31:04,300
find elsewhere in math.

547
00:31:04,900 --> 00:31:08,623
For example, at the top of the lesson, I promised that the technique that we 

548
00:31:08,623 --> 00:31:12,154
would use would be similar in spirit to the way that primes are studied, 

549
00:31:12,154 --> 00:31:16,120
and the set of ideas that leads up to the Riemann hypothesis and things like that.

550
00:31:16,500 --> 00:31:19,770
Now this is a very beautiful topic, enough so that I think it seems a 

551
00:31:19,770 --> 00:31:23,040
little criminal to cram some kind of rushed version into the end here.

552
00:31:23,340 --> 00:31:26,699
The right thing to do, I think, is to just make that video I promised 

553
00:31:26,699 --> 00:31:29,820
a while back about the zeta function, take the time, do it right.

554
00:31:30,440 --> 00:31:34,149
But if you're curious, and if you'll allow me to throw some things up on the screen 

555
00:31:34,149 --> 00:31:37,902
without explaining them, here's the two or three sentence version of how the two are 

556
00:31:37,902 --> 00:31:38,300
parallel.

557
00:31:39,020 --> 00:31:43,558
Just like our subsets puzzle, the way that Riemann studied primes involved a discrete 

558
00:31:43,558 --> 00:31:47,992
sequence we want to understand, something carrying information about prime numbers, 

559
00:31:47,992 --> 00:31:52,320
and then considering a function whose coefficients are the terms in that sequence.

560
00:31:53,120 --> 00:31:55,843
In that case, it's not quite a polynomial, instead it's a 

561
00:31:55,843 --> 00:31:58,050
related structure known as a Dirichlet series, 

562
00:31:58,050 --> 00:32:01,760
or Dirichlet series depending on who you ask, but it's the same essential idea.

563
00:32:02,160 --> 00:32:06,597
Then the way to suss out information about those coefficients comes from 

564
00:32:06,597 --> 00:32:11,400
studying how this function behaves with, you guessed it, complex valued inputs.

565
00:32:12,360 --> 00:32:15,477
The techniques in his case get a lot more sophisticated, 

566
00:32:15,477 --> 00:32:18,376
after all Riemann was a pioneer in complex analysis, 

567
00:32:18,376 --> 00:32:23,024
but the fact remains extending your domain beyond real numbers like this offers you, 

568
00:32:23,024 --> 00:32:27,400
the mathematician, a lot more power in making deductions about the coefficients.

569
00:32:28,700 --> 00:32:32,227
For some viewers this all might leave the lingering question of 

570
00:32:32,227 --> 00:32:35,920
why exactly complex numbers are so unreasonably useful in this way.

571
00:32:36,660 --> 00:32:40,344
It's a hard question to answer exactly, but if you think about our puzzle, 

572
00:32:40,344 --> 00:32:44,077
everything we just did, as soon as we were in this situation where plugging 

573
00:32:44,077 --> 00:32:47,614
in different inputs revealed hidden information about the coefficients, 

574
00:32:47,614 --> 00:32:50,758
it's sort of like the more inputs you can work with the better, 

575
00:32:50,758 --> 00:32:55,180
so you might as well open yourself up to a richer space of numbers like the complex plane.

576
00:32:55,840 --> 00:32:59,560
But there is a more specific intuition that I want you to come away with here.

577
00:33:00,060 --> 00:33:04,637
In our puzzle the relevant fact that we wanted, the sum of every fifth coefficient, 

578
00:33:04,637 --> 00:33:08,833
was a kind of frequency question, and the real reason the complex numbers as 

579
00:33:08,833 --> 00:33:12,974
opposed to some other structure proved to be useful for us is that we could 

580
00:33:12,974 --> 00:33:16,680
find a value so that successive products have this cycling behavior.

581
00:33:17,000 --> 00:33:20,373
This use of values on the unit circle and roots of unity in 

582
00:33:20,373 --> 00:33:24,140
particular to suss out frequency information is extremely fruitful.

583
00:33:24,400 --> 00:33:28,300
It is almost impossible to overstate how helpful that idea is.

584
00:33:28,580 --> 00:33:31,220
Just to give one out of thousands of examples, 

585
00:33:31,220 --> 00:33:36,052
in the 1990s Peter Shor found a way for quantum computers to factor large numbers way 

586
00:33:36,052 --> 00:33:38,300
way faster than classical computers can.

587
00:33:38,620 --> 00:33:42,031
And if you go in and you look at the details of how what we now 

588
00:33:42,031 --> 00:33:45,175
call Shor's algorithm works, the idea is essentially this, 

589
00:33:45,175 --> 00:33:48,800
the use of roots of unity to detect a kind of frequency information.

590
00:33:49,320 --> 00:33:52,626
More generally this is the core idea that underlies Fourier transforms 

591
00:33:52,626 --> 00:33:56,120
and Fourier series and the infinite swell of topics that follow from those.

592
00:33:56,980 --> 00:33:59,527
As to the topic of generating functions themselves, 

593
00:33:59,527 --> 00:34:02,026
we've really only just scratched the surface here, 

594
00:34:02,026 --> 00:34:05,652
and if you want to learn more I highly recommend this kind of hilariously 

595
00:34:05,652 --> 00:34:08,199
named book Generating Functionology by Herbert Wilf.

596
00:34:08,540 --> 00:34:10,774
And I'll also leave up a few fun puzzles on the screen here 

597
00:34:10,774 --> 00:34:13,120
for anyone who wants to flex their muscles a bit with the idea.

