1
00:00:00,000 --> 00:00:04,000
In a moment, I will ask you a puzzle, and it's a pretty hard puzzle, actually,

2
00:00:04,000 --> 00:00:09,040
but before I do, I want to lead with a spoiler, which is the fact that the way we're going to solve this

3
00:00:09,040 --> 00:00:11,280
involves the use of complex numbers.

4
00:00:11,280 --> 00:00:14,560
And once you hear it, you will agree that that seems absurd,

5
00:00:14,560 --> 00:00:17,600
given that the puzzle is going to be purely a discrete question.

6
00:00:17,600 --> 00:00:20,480
It only asks about whole numbers and their sums.

7
00:00:20,480 --> 00:00:24,560
There's not a whiff of the imaginary or even continuity anywhere on the horizon.

8
00:00:25,120 --> 00:00:27,840
It's certainly not the only time that complex numbers are

9
00:00:27,840 --> 00:00:30,960
unreasonably useful for discrete math, to borrow a phrase.

10
00:00:30,960 --> 00:00:34,960
The more famous example that I could bring up would be how the modern way that mathematicians

11
00:00:34,960 --> 00:00:38,160
understand prime numbers, you know, questions about how they're distributed,

12
00:00:38,160 --> 00:00:40,320
their density at certain regions, things like that,

13
00:00:40,320 --> 00:00:45,920
well, it involves studying specially designed functions whose inputs and outputs are complex numbers.

14
00:00:45,920 --> 00:00:49,520
Some of you may know that this is what the famous Riemann hypothesis is all about.

15
00:00:49,520 --> 00:00:52,560
Basically, there's a specially designed function, and on the face of it,

16
00:00:52,560 --> 00:00:55,200
it looks unrelated to the discrete world of primes.

17
00:00:55,200 --> 00:00:57,280
It's smooth, it's complex valued.

18
00:00:57,280 --> 00:01:00,640
But under the hood, it encodes all of the information that you could ever want

19
00:01:00,640 --> 00:01:02,400
about those discrete prime numbers.

20
00:01:02,400 --> 00:01:06,480
And most importantly, certain questions about primes are easier to answer

21
00:01:06,480 --> 00:01:10,560
by analyzing this function than they would be by directly analyzing the primes themselves.

22
00:01:11,120 --> 00:01:14,000
Of course, our puzzle, which I promise I'll share in just a moment,

23
00:01:14,000 --> 00:01:16,320
is a lot more innocent than the Riemann hypothesis.

24
00:01:16,320 --> 00:01:17,760
It's a toy problem.

25
00:01:17,760 --> 00:01:21,200
But at the end of the video, I'll share how the techniques that we use to solve it,

26
00:01:21,200 --> 00:01:24,400
the real reason that we're here, are actually pretty similar in spirit

27
00:01:24,400 --> 00:01:27,040
to the setup that leads to the Riemann hypothesis.

28
00:01:27,040 --> 00:01:29,760
And the prime number theorem and that whole circle of thoughts around it.

29
00:01:35,040 --> 00:01:39,520
Our puzzle for today comes from this book here, by Titou and Rescu and Zoomingfeng.

30
00:01:39,520 --> 00:01:42,640
It's basically a collection of problems used in training the USA team

31
00:01:42,640 --> 00:01:44,720
for the International Math Olympiad.

32
00:01:44,720 --> 00:01:47,040
And if we turn to chapter 2, Advanced Problems,

33
00:01:47,040 --> 00:01:50,160
problem number 10 asks this seemingly innocent question.

34
00:01:50,800 --> 00:01:54,960
Find the number of subsets of the set 1 up to 2000,

35
00:01:54,960 --> 00:01:57,520
the sum of whose elements is divisible by 5.

36
00:01:59,040 --> 00:02:01,520
Okay, so that might take a little bit of a moment to parse.

37
00:02:01,520 --> 00:02:05,520
For example, something like the set 3, 1, 4, that would be a subset.

38
00:02:05,520 --> 00:02:08,480
All of its elements are also elements in the big set.

39
00:02:08,480 --> 00:02:12,480
And its sum, 3 plus 1 plus 4, is 8, so that wouldn't be considered.

40
00:02:12,480 --> 00:02:13,680
That's not in our count.

41
00:02:13,680 --> 00:02:18,320
Whereas something like the set 2, 3, 5, also a subset, has a sum of 10.

42
00:02:18,320 --> 00:02:20,880
That is divisible by 5, so it's one that we want to count.

43
00:02:21,520 --> 00:02:23,760
The preview animation that I had at the start

44
00:02:23,760 --> 00:02:27,440
is essentially a brute force program trying to answer this question.

45
00:02:27,440 --> 00:02:30,640
It will iterate through all of the different possible subsets,

46
00:02:30,640 --> 00:02:32,880
finding the sum of each one along the way,

47
00:02:32,880 --> 00:02:36,000
and it increments a counter each time that it finds a multiple of 5.

48
00:02:36,560 --> 00:02:40,000
And you know what, a nice warm-up question here would be to pause and think about

49
00:02:40,000 --> 00:02:42,560
how many total subsets are there overall?

50
00:02:42,560 --> 00:02:44,400
Forget this multiple of 5 stuff.

51
00:02:44,400 --> 00:02:46,560
How long will it take for this program to terminate?

52
00:02:48,480 --> 00:02:51,840
Many of you may know the answer is 2 to the power 2000.

53
00:02:51,920 --> 00:02:54,880
The basic idea there is that when you're constructing a subset,

54
00:02:54,880 --> 00:02:57,840
you have 2000 different binary choices you can make.

55
00:02:57,840 --> 00:02:59,920
Do you include an element or do you not?

56
00:02:59,920 --> 00:03:02,640
And all of those choices are independent of each other,

57
00:03:02,640 --> 00:03:05,840
so the total number of choices you have in constructing a subset

58
00:03:05,840 --> 00:03:08,960
is 2 times 2 times 2 times 2, on and on, 2000 times.

59
00:03:09,680 --> 00:03:13,440
And thinking about our program, that is a monstrously huge number.

60
00:03:13,440 --> 00:03:16,720
So even if we gave this brute forcing approach all the time in the universe,

61
00:03:16,720 --> 00:03:19,760
with all the physical resources the universe could conceivably provide,

62
00:03:20,320 --> 00:03:22,880
it wouldn't even come close, it wouldn't scratch the surface.

63
00:03:22,880 --> 00:03:25,360
Obviously we have to be a lot cleverer than that.

64
00:03:25,360 --> 00:03:29,040
And if you were to just guess what the answer should be, make a rough approximation,

65
00:03:29,040 --> 00:03:32,320
you'd probably guess, you know, it should be around a fifth of all the total subsets.

66
00:03:32,320 --> 00:03:35,840
There's probably a roughly even distribution of all these sums mod 5.

67
00:03:35,840 --> 00:03:38,400
And yes, that is true, that's a decent approximation.

68
00:03:38,400 --> 00:03:42,640
But the heart of the question, the real challenge here, is to get a precise answer.

69
00:03:42,640 --> 00:03:45,520
This can't be the actual answer since it's not an integer,

70
00:03:45,520 --> 00:03:48,320
but is the true answer a little bit more or a little bit less?

71
00:03:48,320 --> 00:03:50,400
Or maybe it's a lot more or a lot less?

72
00:03:50,400 --> 00:03:53,520
What tactics could you possibly use to figure out that error?

73
00:03:55,520 --> 00:04:00,000
To be clear, this lesson is definitely much more about the journey than the destination.

74
00:04:00,000 --> 00:04:03,120
Will you ever need to filter and count subsets in this way?

75
00:04:03,120 --> 00:04:05,360
Almost certainly not, I wouldn't expect so.

76
00:04:05,360 --> 00:04:09,200
But toy problem or not, it is a legitimately challenging question,

77
00:04:09,200 --> 00:04:14,160
and navigating that challenge develops skills that are relevant to other sorts of challenging questions.

78
00:04:14,160 --> 00:04:18,160
For you and me, there are at least two very surprising and very beautiful twists

79
00:04:19,040 --> 00:04:21,120
that the solution I'd like to share with you takes.

80
00:04:21,120 --> 00:04:24,720
I've already tipped my hand that complex numbers will make a surprise appearance,

81
00:04:24,720 --> 00:04:27,520
but before we even get to that, there is another strange turn,

82
00:04:27,520 --> 00:04:30,720
which is arguably even weirder and even more unexpected.

83
00:04:31,280 --> 00:04:33,920
To set the stage though, let's just get our bearings with the puzzle

84
00:04:33,920 --> 00:04:37,840
and do what all good problem solvers should do and start with a simpler example,

85
00:04:37,840 --> 00:04:40,320
maybe just trying it with the set 1, 2, 3, 4, 5.

86
00:04:41,040 --> 00:04:43,200
If you were solving this problem with pencil and paper,

87
00:04:43,200 --> 00:04:45,600
you know, you're one of these kids training for the IMO,

88
00:04:45,600 --> 00:04:49,120
it's not a bad idea to simply list out all 2 to the 5 subsets.

89
00:04:49,120 --> 00:04:50,880
It's only 32, it's not that many.

90
00:04:55,680 --> 00:04:58,720
There's different ways that you might want to organize all of these in your mind,

91
00:04:58,720 --> 00:05:01,840
but since the thing that we care about is their sum,

92
00:05:01,840 --> 00:05:06,320
the natural thing to do would be to go through all of them one by one and compute those sums.

93
00:05:06,320 --> 00:05:08,640
Over here, just doing it on YouTube, I've got a computer,

94
00:05:08,640 --> 00:05:11,360
so I'll cheat a little and show what all their sums are.

95
00:05:11,360 --> 00:05:14,000
I'll also cheat a little bit and rearrange all of these,

96
00:05:14,000 --> 00:05:17,680
organizing them suggestively into collections that all have the same sum.

97
00:05:18,240 --> 00:05:21,280
For instance, there are 3 distinct subsets that add up to 6,

98
00:05:21,280 --> 00:05:23,120
and they'll all sit in this little box,

99
00:05:23,120 --> 00:05:26,480
and the 3 subsets adding up to 10 will all live in this little box.

100
00:05:27,120 --> 00:05:28,960
And all in all, the ones that we care about,

101
00:05:28,960 --> 00:05:31,120
the subsets with a sum divisible by 5,

102
00:05:31,680 --> 00:05:35,120
have been put over here on the left, and it looks like there's a total of 8 of them.

103
00:05:36,160 --> 00:05:39,520
Oh, and by the way, I should say we are counting the empty set,

104
00:05:39,520 --> 00:05:43,760
we consider its sum to be 0, and we consider that to be a multiple of 5.

105
00:05:43,760 --> 00:05:47,200
By the end, I hope you'll agree all of those are abundantly natural choices to make.

106
00:05:47,920 --> 00:05:51,680
Take a moment to compare this answer to what you might expect heuristically.

107
00:05:51,680 --> 00:05:56,560
Out of all 32 total subsets, a fifth of that would have been 6.4,

108
00:05:56,560 --> 00:06:00,240
so at least in this small example, the true answer is a little bit bigger than that.

109
00:06:00,240 --> 00:06:02,480
That's maybe something you want to tuck in the back of your mind.

110
00:06:03,760 --> 00:06:07,120
Okay, and this is the part of the video where, I'll be honest with you,

111
00:06:07,120 --> 00:06:08,960
I have no idea how to motivate it.

112
00:06:08,960 --> 00:06:12,480
Personally, I like it when math feels like something you could have discovered yourself,

113
00:06:12,480 --> 00:06:15,360
and if you and I were sitting down together solving this problem,

114
00:06:15,360 --> 00:06:18,000
I think there's all sorts of natural steps that you might take.

115
00:06:18,000 --> 00:06:21,600
Maybe you try to understand if there's some sort of structure to the subsets,

116
00:06:21,600 --> 00:06:24,800
or you play around with how these sums are distributed mod 5

117
00:06:24,800 --> 00:06:27,440
at many different iterations for other small examples,

118
00:06:27,440 --> 00:06:30,240
and from that maybe you try to eke out some kind of proof by induction.

119
00:06:30,800 --> 00:06:33,280
When I shared an early version of this lesson with some patrons,

120
00:06:33,280 --> 00:06:35,600
people brought up some nice linear algebra approaches.

121
00:06:35,600 --> 00:06:37,920
All those are well and good, nothing wrong with those.

122
00:06:37,920 --> 00:06:41,920
But instead, my goal here is to teach you about something called a generating function,

123
00:06:41,920 --> 00:06:45,120
and it's one of those tactics where after the fact you can think,

124
00:06:45,120 --> 00:06:49,040
okay, yeah, I get that this works, but how on earth would you have thought of that?

125
00:06:49,680 --> 00:06:51,280
Honestly, I don't know.

126
00:06:51,280 --> 00:06:55,280
There's a time in your life before you understand generating functions, and a time after,

127
00:06:55,280 --> 00:06:58,400
and I can't think of anything that connects them other than a leap of faith.

128
00:06:59,120 --> 00:07:03,920
I'm going to ask you to consider the polynomial 1 plus x times 1 plus x squared

129
00:07:04,480 --> 00:07:08,720
times 1 plus x cubed times 1 plus x to the fourth times 1 plus x to the fifth.

130
00:07:08,720 --> 00:07:11,360
Now, I know you could rightfully ask, where does this come from?

131
00:07:11,360 --> 00:07:13,360
What do polynomials have to do with things?

132
00:07:13,360 --> 00:07:16,160
What is the variable x even supposed to represent right now?

133
00:07:16,960 --> 00:07:19,280
And essentially, x is purely a symbol.

134
00:07:19,280 --> 00:07:24,640
The only reason that we've written a polynomial here is that the act of algebraically expanding it

135
00:07:24,640 --> 00:07:28,640
is going to completely mirror the act of constructing subsets.

136
00:07:28,640 --> 00:07:33,120
And, importantly, this grouping that we want, where subsets with the same sum

137
00:07:33,120 --> 00:07:37,120
are all bunched together, kind of happens automatically when you do this.

138
00:07:37,120 --> 00:07:38,320
And let me show you what I mean.

139
00:07:38,880 --> 00:07:43,600
When you expand out this expression, it basically comes down to making five binary choices.

140
00:07:43,600 --> 00:07:45,760
Which term from each parenthetical do you choose?

141
00:07:46,480 --> 00:07:49,360
If you choose the 1 from each of those parentheticals,

142
00:07:49,360 --> 00:07:53,120
that will correspond to the empty set, where we don't choose any of the elements.

143
00:07:53,760 --> 00:07:57,680
Whereas if I choose the x to the 1 term, and then 1's from everything else,

144
00:07:57,680 --> 00:08:01,280
that will correspond to the singleton set that just contains the number 1.

145
00:08:01,920 --> 00:08:05,840
Similarly, if I choose the x squared term, but 1's from everything else,

146
00:08:05,840 --> 00:08:08,320
that corresponds to the set just containing 2.

147
00:08:08,320 --> 00:08:12,240
Just choosing the x cubed term corresponds to the set just containing the number 3.

148
00:08:12,880 --> 00:08:17,040
But, interestingly, notice what happens if I choose the x to the 1 term,

149
00:08:17,040 --> 00:08:20,160
and the x squared term, and then 1's from everything else.

150
00:08:20,160 --> 00:08:25,600
This corresponds to the choice of the subset that has 1 and 2, and nothing from everything else.

151
00:08:25,600 --> 00:08:30,000
But in the polynomial, the way it expands looks like x cubed.

152
00:08:30,000 --> 00:08:32,400
So we have two different x cubed terms,

153
00:08:32,400 --> 00:08:35,280
each of which came from a subset whose sum was 3.

154
00:08:36,160 --> 00:08:40,160
Honestly, the pattern I'm going for here is one that's probably easiest if you just take the time

155
00:08:40,160 --> 00:08:43,760
to pause and think through for yourself what happens when you expand everything here.

156
00:08:44,480 --> 00:08:48,960
Essentially, every possible subset corresponds to one of the terms in this expansion.

157
00:08:49,520 --> 00:08:54,160
And then the critical point is that the exponent in the term that you get from that expansion

158
00:08:54,160 --> 00:08:57,360
equals the sum of that corresponding subset.

159
00:08:57,360 --> 00:08:59,520
Kind of confusing when you say it out loud, but again,

160
00:08:59,520 --> 00:09:02,480
if you just think it through yourself, I think you can see what I mean.

161
00:09:02,480 --> 00:09:06,800
For example, when all of the dust settles and we collect all 32 terms here,

162
00:09:06,800 --> 00:09:09,280
three of those terms are x to the 10th,

163
00:09:09,280 --> 00:09:13,520
and each of those came from a choice of elements whose sum was equal to 10.

164
00:09:14,320 --> 00:09:18,560
Now normally, when we write a polynomial, we collect together all like terms.

165
00:09:18,560 --> 00:09:20,960
Instead of having three copies of x to the 10th,

166
00:09:20,960 --> 00:09:24,240
we would just see the coefficient 3 in front of x to the 10th.

167
00:09:24,240 --> 00:09:29,520
So each of these coefficients is a way of encoding the number of subsets with a particular sum.

168
00:09:30,240 --> 00:09:34,400
So this, like I said at the start, is an example of something called a generating function,

169
00:09:34,400 --> 00:09:39,760
where the idea is if you have some question with an answer associated with each positive integer,

170
00:09:39,760 --> 00:09:43,280
so in our case, how many subsets add up to a particular value.

171
00:09:43,280 --> 00:09:48,640
When you construct a polynomial whose coefficients correspond to the answers to that question,

172
00:09:48,640 --> 00:09:51,760
you can get a surprising amount of insight from your original question

173
00:09:51,760 --> 00:09:56,400
by mathematically manipulating and analyzing the properties of this polynomial.

174
00:09:56,400 --> 00:09:59,440
There are tons and tons of examples of generating functions,

175
00:09:59,440 --> 00:10:02,320
but just to bring up one other one which is especially fun,

176
00:10:02,320 --> 00:10:05,200
you can use the same idea to study Fibonacci numbers.

177
00:10:05,200 --> 00:10:08,960
So all the coefficients of this polynomial will be Fibonacci numbers,

178
00:10:08,960 --> 00:10:12,880
and in this case it's an infinite polynomial, so I should really be calling it a power series.

179
00:10:13,440 --> 00:10:15,280
I won't fully explain the details here,

180
00:10:15,280 --> 00:10:18,160
but I will leave them up on the screen for anyone who's curious.

181
00:10:18,160 --> 00:10:22,080
The basic idea is that the rule that's used to define Fibonacci numbers,

182
00:10:22,080 --> 00:10:24,080
each one being the sum of the previous two,

183
00:10:24,080 --> 00:10:26,800
can be expressed as an equation in terms of this function.

184
00:10:27,360 --> 00:10:31,120
That equation in turn lets you write that function in an alternate form.

185
00:10:31,920 --> 00:10:34,880
And then, and here's most of the details I'm skipping over,

186
00:10:34,880 --> 00:10:38,720
if you manipulate that, you know, throw in a little partial fraction decomposition here,

187
00:10:38,720 --> 00:10:41,600
a little bit of geometric series power expansion there,

188
00:10:41,600 --> 00:10:46,080
you can get yourself an exact closed form expression for each individual Fibonacci number,

189
00:10:46,080 --> 00:10:46,960
which is really cool.

190
00:10:47,600 --> 00:10:50,800
I mentioned this really just to show the tip of the iceberg of the fact

191
00:10:50,800 --> 00:10:55,200
that this idea of a generating function goes way way beyond our particular example.

192
00:10:55,440 --> 00:11:00,960
Now, in our particular problem, if we extend from the simple example with just 12345

193
00:11:00,960 --> 00:11:03,840
to the big example with all the numbers up to 2000,

194
00:11:03,840 --> 00:11:08,720
our corresponding generating function involves these 2000 different binomial terms,

195
00:11:08,720 --> 00:11:12,960
you know, 1 plus x, 1 plus x squared, on and on, up to 1 plus x to the 2000.

196
00:11:12,960 --> 00:11:16,000
And the idea is that if you were to expand this,

197
00:11:16,000 --> 00:11:18,800
the coefficients tell us all the information we want.

198
00:11:18,800 --> 00:11:21,680
Now, it would be insane to actually expand it,

199
00:11:22,560 --> 00:11:26,640
but it is helpful to keep in the back of your mind, in principle, what that would look like.

200
00:11:26,640 --> 00:11:31,440
For example, in principle, if you expanded it, you would find that the coefficient in front of the

201
00:11:31,440 --> 00:11:34,800
x to the 25th term happens to be 142.

202
00:11:35,360 --> 00:11:41,680
And this corresponds to the fact that there are 142 distinct subsets that have a sum of 25.

203
00:11:42,480 --> 00:11:45,440
So the art of analyzing a generating function here

204
00:11:45,440 --> 00:11:51,040
will be to deduce facts about these coefficients without actually expanding the expression.

205
00:11:51,680 --> 00:11:59,600
So moving forward, I'm just going to write this expansion more abstractly,

206
00:11:59,600 --> 00:12:02,640
just a sum from n equals 0 up to capital N,

207
00:12:02,640 --> 00:12:05,680
where c sub n tells us the coefficients that we don't know.

208
00:12:05,680 --> 00:12:08,240
All of that starts off as a black box to us.

209
00:12:08,240 --> 00:12:11,280
And moving forward, we're going to start treating this as an actual function,

210
00:12:11,280 --> 00:12:14,000
something where we plug in x, we see what the output is,

211
00:12:14,000 --> 00:12:16,880
and then we ask, what does that tell us about the coefficients?

212
00:12:16,880 --> 00:12:20,960
For example, a very easy input would be to plug in something like x equals 0.

213
00:12:20,960 --> 00:12:25,200
In that case, importantly, we know how to evaluate it using the factored form above.

214
00:12:25,200 --> 00:12:30,240
If you plug in x equals 0 for everything, all of the terms look like 1, so the answer is 1.

215
00:12:30,240 --> 00:12:33,600
And in the expanded form, all of those terms involving an x will get killed,

216
00:12:33,600 --> 00:12:36,960
they go to 0, leaving us just with the first term, c sub 0.

217
00:12:37,680 --> 00:12:40,880
Now, in this case, that doesn't really tell us anything all that exciting.

218
00:12:40,880 --> 00:12:45,360
It essentially translates to saying there is a single empty set, but we're just getting our feet wet.

219
00:12:46,160 --> 00:12:49,600
As the next example, take a moment to think about evaluating f at 1.

220
00:12:50,320 --> 00:12:52,720
This is something we can do with the expression we know,

221
00:12:52,720 --> 00:12:56,480
when you plug in 1 for all of these x's, every term looks like a 2,

222
00:12:56,480 --> 00:13:00,480
so in total we get 2 multiplied by itself 2,000 times.

223
00:13:00,480 --> 00:13:04,320
On the other hand, in the expanded expression, if you plug in x equals 1,

224
00:13:04,960 --> 00:13:09,680
all of these powers of x go to 1, so we're essentially adding up all of the coefficients.

225
00:13:09,680 --> 00:13:11,440
Which is pretty cool when you think about it.

226
00:13:11,440 --> 00:13:14,080
Just by evaluating the function at a single number,

227
00:13:14,080 --> 00:13:16,880
we can deduce what the sum of all of the coefficients are.

228
00:13:17,440 --> 00:13:20,240
Now, again, in our particular example,

229
00:13:20,240 --> 00:13:24,160
it's not all that exciting because we already know what the sum of these coefficients are.

230
00:13:24,720 --> 00:13:28,800
Remember, each coefficient counts how many subsets have a certain sum,

231
00:13:28,800 --> 00:13:31,440
and so when you add them up, we're just counting all of the subsets,

232
00:13:31,440 --> 00:13:33,280
which we know to be 2 to the 2,000.

233
00:13:34,000 --> 00:13:36,560
However, I can give you a genuinely new fact

234
00:13:36,560 --> 00:13:39,440
if I ask you to evaluate this function at negative 1.

235
00:13:39,440 --> 00:13:41,040
Take a moment to think about what that means.

236
00:13:43,360 --> 00:13:46,320
If you plug in negative 1, again we start with the thing we know,

237
00:13:46,320 --> 00:13:50,240
the factored expression up top, and here all you need is to look at the first term.

238
00:13:50,240 --> 00:13:55,440
When you plug in x, the first parenthetical goes to 0, so the whole expression has to be 0.

239
00:13:55,440 --> 00:13:58,960
But what does that tell you when we apply it to the expanded expression,

240
00:13:58,960 --> 00:14:00,560
using all of the coefficients?

241
00:14:00,560 --> 00:14:05,120
And in the spirit of being as suggestive as possible of the strange turns that this solution takes,

242
00:14:05,120 --> 00:14:09,440
I want you to really visualize the various powers of negative 1 in this expression

243
00:14:09,440 --> 00:14:11,200
in terms of rotations.

244
00:14:11,200 --> 00:14:16,160
The first term, negative 1 to the 0, is just 1, which we'll picture as a vector from 0 to 1.

245
00:14:16,560 --> 00:14:20,000
Negative 1 to the first power is just negative 1 itself,

246
00:14:20,000 --> 00:14:25,360
which I want you to be thinking about as a 180 degree rotation away from that last term.

247
00:14:25,360 --> 00:14:30,880
Then when we take negative 1 squared, that's positive 1, again a 180 degree rotation.

248
00:14:30,880 --> 00:14:35,760
And in general, each successive term here looks like another rotation by 180 degrees.

249
00:14:35,760 --> 00:14:39,280
Algebraically, what this translates to is that we have an oscillating sum

250
00:14:39,280 --> 00:14:42,000
between the even coefficients and the odd coefficients.

251
00:14:42,000 --> 00:14:44,160
But keep the visual in the back of your mind.

252
00:14:44,160 --> 00:14:46,720
This expression is true for any generating function,

253
00:14:46,720 --> 00:14:49,120
but again, for our special generating function,

254
00:14:49,120 --> 00:14:52,800
we know that this value, this alternating sum, should equal 0.

255
00:14:52,800 --> 00:14:56,240
And a way you can interpret that is that it's telling you there's an equal balance

256
00:14:56,240 --> 00:14:58,880
between the even coefficients and the odd coefficients.

257
00:14:59,520 --> 00:15:02,640
And remember, maybe in the context of our smaller example,

258
00:15:02,640 --> 00:15:06,480
these coefficients are encoding for us facts about subsets.

259
00:15:06,480 --> 00:15:11,200
So if there's an equal balance between all those even coefficients and the odd coefficients,

260
00:15:11,200 --> 00:15:16,480
it's telling you that half of all the subsets have an even sum, and half of them have an odd sum.

261
00:15:16,480 --> 00:15:20,720
That's probably what you would expect, but it's not obvious at first how you would show that.

262
00:15:20,720 --> 00:15:23,200
And with the generating function, it just kind of pops right out.

263
00:15:24,320 --> 00:15:28,160
And again, to be suggestive of where we're going, let me rewrite this a little bit

264
00:15:28,160 --> 00:15:33,600
by taking the last two things we evaluated, add up those two, and then divide by 1 half.

265
00:15:34,960 --> 00:15:39,120
If you think about it, this is a way of filtering out all of the even coefficients

266
00:15:39,120 --> 00:15:41,680
and killing all of the odd coefficients.

267
00:15:41,680 --> 00:15:46,480
So it becomes an especially clean way to write the fact that the sum of all of the even coefficients,

268
00:15:46,480 --> 00:15:50,640
which again in the back of your mind means the total number of subsets with an even sum,

269
00:15:50,640 --> 00:15:52,480
will look like half of the total.

270
00:15:52,480 --> 00:15:57,280
This is, needless to say, tantalizingly close to the actual question we want to answer.

271
00:15:57,280 --> 00:16:01,520
What we would like to do is find some clever thing that we can do to the function f,

272
00:16:01,520 --> 00:16:04,160
some well-chosen numbers to evaluate it on,

273
00:16:04,160 --> 00:16:07,760
so that we get all the coefficients corresponding to multiples of 5.

274
00:16:07,760 --> 00:16:10,720
Again, thinking back to what these coefficients encode for us,

275
00:16:10,720 --> 00:16:12,560
that will be answering our final question.

276
00:16:12,560 --> 00:16:16,800
That will be counting the total number of subsets whose sum is divisible by 5.

277
00:16:19,040 --> 00:16:21,920
The trick to doing this is to generalize what we just did,

278
00:16:21,920 --> 00:16:25,280
where the successive powers of the input were rotating back and forth.

279
00:16:26,000 --> 00:16:28,720
But this time, we don't want them to rotate every other time,

280
00:16:28,720 --> 00:16:31,520
we'd like them to somehow rotate with a period of 5.

281
00:16:31,520 --> 00:16:34,400
And to do that, we extend into the complex plane.

282
00:16:34,480 --> 00:16:39,440
You see, up there, we can find a value so that as we take successive powers of it,

283
00:16:39,440 --> 00:16:44,000
it will rotate by a fifth of a turn, giving us a process with a frequency of 5.

284
00:16:44,560 --> 00:16:47,440
And if you step back, I know that it's kind of absurd

285
00:16:47,440 --> 00:16:49,680
that I'm asking you to think about complex numbers.

286
00:16:49,680 --> 00:16:52,640
I mean, we started with a counting question, it's discrete math,

287
00:16:52,640 --> 00:16:54,560
but hopefully it's not all that wild.

288
00:16:55,360 --> 00:17:00,560
And again, the reason that I'm drawing things out to tee up the various strange turns in the solution

289
00:17:00,560 --> 00:17:04,000
is that they're actually not all that strange in the broader scheme of math.

290
00:17:04,000 --> 00:17:08,320
The trick we're about to apply has a heavy resemblance to many other instances

291
00:17:08,320 --> 00:17:12,640
of using complex numbers to better understand discrete questions of integers.

292
00:17:12,640 --> 00:17:16,320
So the more it feels like something that you could have discovered yourself,

293
00:17:16,320 --> 00:17:20,000
the more it might actually be the case that when you're working on some future problem

294
00:17:20,000 --> 00:17:23,120
in this circle of thoughts, you will discover it yourself.

295
00:17:28,800 --> 00:17:33,600
To be specific, the complex number that I care about is one that I'm going to label zeta,

296
00:17:33,600 --> 00:17:36,560
and it sits a fifth of a turn around the unit circle.

297
00:17:36,560 --> 00:17:41,280
So its angle is 2 pi fifths radians, and its magnitude is one.

298
00:17:41,840 --> 00:17:44,400
This means with the standard Euler's formula notation,

299
00:17:44,400 --> 00:17:49,520
we would write that number explicitly as e to the power 2 pi i divided by 5.

300
00:17:49,520 --> 00:17:52,560
If you're not as comfortable with that notation, you could think of it as something

301
00:17:52,560 --> 00:17:58,240
whose real part is the cosine of 72 degrees, 72 being a fifth of a full turn,

302
00:17:58,240 --> 00:18:01,440
and the imaginary part is the sine of 72 degrees.

303
00:18:02,400 --> 00:18:06,160
But to be honest, you don't actually need to think about the explicit value.

304
00:18:06,160 --> 00:18:10,400
Instead, the important thing to focus on is the property that powers of this number have.

305
00:18:10,960 --> 00:18:14,240
For example, when you square it, because its magnitude was one,

306
00:18:14,240 --> 00:18:19,120
the magnitude of its square is also one, but it rotates a fifth of a turn around the unit circle,

307
00:18:19,120 --> 00:18:21,040
so it now sits two fifths of a turn around.

308
00:18:22,000 --> 00:18:26,160
Similarly, when you raise it to the third power, you end up three fifths of a turn around,

309
00:18:26,160 --> 00:18:30,400
raise it to the fourth power, you end up four fifths of a turn, and raise it to the fifth power,

310
00:18:30,480 --> 00:18:32,800
and you've gotten all the way back around to one.

311
00:18:32,800 --> 00:18:35,680
It's the same thing as if you had raised it to the zeroth power,

312
00:18:35,680 --> 00:18:39,040
we get this cycling every five terms. That's the thing that we care about.

313
00:18:39,600 --> 00:18:42,880
These numbers have a special name, they're called the fifth roots of unity,

314
00:18:43,440 --> 00:18:47,360
essentially because they solve the equation z to the fifth equals one,

315
00:18:47,360 --> 00:18:49,600
they are fifth roots of the number one.

316
00:18:49,600 --> 00:18:52,560
If you just presented someone with this equation, they would probably say,

317
00:18:52,560 --> 00:18:55,120
the answer is clearly z equals one,

318
00:18:55,120 --> 00:18:58,800
but the idea is that there are four other answers in the complex plane,

319
00:18:58,800 --> 00:19:01,840
four other numbers where when you raise them to the fifth you get one,

320
00:19:01,840 --> 00:19:04,720
and considering them as a collective is often quite useful.

321
00:19:04,720 --> 00:19:07,280
Remember that equation, it'll come back for us a little bit later.

322
00:19:08,560 --> 00:19:13,680
So in analogy with what we did earlier, where we added together f of one and f of negative one

323
00:19:13,680 --> 00:19:16,160
to get this cancellation among the odd terms,

324
00:19:16,160 --> 00:19:19,760
what we're going to do is evaluate f at all five of these numbers,

325
00:19:19,760 --> 00:19:23,120
and then add them together, and hopefully we get some cancellation.

326
00:19:23,120 --> 00:19:26,720
That might seem kind of complicated, but let's just take a super simple example,

327
00:19:26,720 --> 00:19:29,840
like the case where f of x is simply equal to x.

328
00:19:29,840 --> 00:19:31,840
In that case, when we add up these five terms,

329
00:19:31,840 --> 00:19:34,240
we're just adding up the roots of unity themselves,

330
00:19:34,240 --> 00:19:38,160
zeta to the zero plus zeta to the one, on and on, up to zeta to the fourth.

331
00:19:38,160 --> 00:19:41,360
When you add complex numbers, you can think of it like vector addition,

332
00:19:41,360 --> 00:19:42,400
with the tip to the tail.

333
00:19:42,960 --> 00:19:46,160
So zeta to the zero plus zeta will look like this,

334
00:19:46,160 --> 00:19:48,320
and then if I add on zeta squared,

335
00:19:48,320 --> 00:19:52,160
bringing the tail of that vector to the tip of the last one, we get this.

336
00:19:52,720 --> 00:19:56,400
Then similarly, if I bring the tail of zeta cubed over to the tip of that one,

337
00:19:56,960 --> 00:19:59,520
and then do likewise for zeta to the fourth,

338
00:19:59,520 --> 00:20:03,200
you'll see how the overall sum actually loops back to be zero.

339
00:20:03,200 --> 00:20:06,080
Another way to think about this is that all five of these terms

340
00:20:06,080 --> 00:20:08,800
are evenly balanced around the number zero.

341
00:20:08,800 --> 00:20:10,640
Their center of mass is at the origin.

342
00:20:11,920 --> 00:20:14,800
Now it's helpful to think about a slightly less trivial example,

343
00:20:14,800 --> 00:20:16,480
if f of x was x squared.

344
00:20:17,120 --> 00:20:20,000
So when you square zeta to the zero, it stays zeta to the zero.

345
00:20:20,000 --> 00:20:21,920
This is just a fancy way of saying the number one.

346
00:20:22,480 --> 00:20:25,280
When you square zeta, you get zeta squared itself.

347
00:20:25,280 --> 00:20:29,840
So you might imagine this dot up here moving over to the zeta squared dot when we do it.

348
00:20:30,480 --> 00:20:33,040
Zeta squared moves to zeta to the fourth.

349
00:20:33,040 --> 00:20:35,680
You might imagine this dot moving over to zeta to the fourth.

350
00:20:36,560 --> 00:20:39,120
Zeta cubed moves to zeta to the sixth,

351
00:20:39,120 --> 00:20:43,280
which, because we loop around every five times, is the same thing as zeta to the one.

352
00:20:43,280 --> 00:20:44,880
So this dot will move up here.

353
00:20:46,480 --> 00:20:50,000
And finally, zeta to the fourth squares to give us zeta to the eighth,

354
00:20:50,000 --> 00:20:54,480
which reduces to be the same as zeta cubed, which I might draw like this.

355
00:20:55,520 --> 00:20:57,440
That might seem a little confusing to think about,

356
00:20:57,440 --> 00:20:59,600
especially with all the arrows I have drawn here,

357
00:20:59,600 --> 00:21:01,840
but it's worth thinking through at least once in your life,

358
00:21:01,840 --> 00:21:04,480
because the idea here is that when we square this,

359
00:21:04,480 --> 00:21:08,720
like go to all of these different terms and I program them to double the angle that they have,

360
00:21:09,280 --> 00:21:11,680
the overall effect is to just shuffle those terms.

361
00:21:11,680 --> 00:21:14,400
We get the same numbers but written in a different order,

362
00:21:14,400 --> 00:21:16,160
so their sum is still going to be zero.

363
00:21:16,800 --> 00:21:21,440
Similarly, if you go through this exercise with x cubed, which I encourage you to do,

364
00:21:21,440 --> 00:21:24,640
and you follow around where are each one of these dots going to end up,

365
00:21:25,280 --> 00:21:27,440
you'll be able to see that when we cube these terms,

366
00:21:27,440 --> 00:21:30,720
when we take each one and we multiply the angle that it has by three,

367
00:21:31,280 --> 00:21:33,040
again we just shuffle them around.

368
00:21:33,040 --> 00:21:35,040
Same terms listed in a different order.

369
00:21:35,040 --> 00:21:38,240
Unsurprisingly, the same thing happens if our function was x to the fourth.

370
00:21:41,840 --> 00:21:46,480
But, critically, where things change is if we consider the function x to the fifth.

371
00:21:47,040 --> 00:21:51,760
In that case, when you raise zeta to the fifth power, by definition it goes to one.

372
00:21:52,320 --> 00:21:55,520
Similarly, zeta squared raised to the fifth power goes to one.

373
00:21:55,520 --> 00:21:57,920
All of these go to one, they are the roots of unity.

374
00:21:57,920 --> 00:22:00,320
This is, after all, their whole purpose in life.

375
00:22:00,320 --> 00:22:03,600
So in this case, when we apply the function and add them all up,

376
00:22:03,600 --> 00:22:08,640
instead of going to zero and getting cancellation, we get a kind of constructive interference.

377
00:22:08,640 --> 00:22:11,920
All of them equal one, so their sum is equal to five.

378
00:22:11,920 --> 00:22:14,880
So if you step back and think about what all those examples mean,

379
00:22:15,440 --> 00:22:19,360
essentially this expression is something that will go to zero for powers of x,

380
00:22:19,360 --> 00:22:24,080
which are not divisible by five, but it goes to something non-zero for powers of x,

381
00:22:24,080 --> 00:22:25,760
which are divisible by five.

382
00:22:25,760 --> 00:22:28,160
And that's exactly the kind of filter that we're looking for.

383
00:22:28,960 --> 00:22:33,760
If you're worried that our actual function is much more complicated than a simple power of x,

384
00:22:33,760 --> 00:22:36,960
essentially things play really nicely here because everything is linear.

385
00:22:37,600 --> 00:22:41,200
If f is some massive polynomial and we want to evaluate this big sum,

386
00:22:41,760 --> 00:22:44,000
you could sort of think of going column by column,

387
00:22:44,240 --> 00:22:47,360
where each time you really are just adding up powers of zeta.

388
00:22:47,360 --> 00:22:51,440
And in most cases, all those powers cancel out with each other and you get zero.

389
00:22:51,440 --> 00:22:55,440
But when all of those powers are multiples of five, they constructively interfere,

390
00:22:55,440 --> 00:22:58,880
and instead you get five times whatever the corresponding coefficient is.

391
00:22:59,440 --> 00:23:02,320
Deep in the weeds, it's easy to forget why we're here in the first place.

392
00:23:02,320 --> 00:23:08,000
But remember, each one of those coefficients tells us how many subsets add up to a certain value.

393
00:23:08,000 --> 00:23:12,240
And so what we want is to add up all of the coefficients that are in the first place.

394
00:23:12,320 --> 00:23:15,840
And what we have right now is a way to explicitly do that.

395
00:23:15,840 --> 00:23:19,120
If we evaluate this function on these five different roots of unity,

396
00:23:19,120 --> 00:23:22,800
which I know seems kind of weird, then all we have to do is divide by five

397
00:23:22,800 --> 00:23:24,640
and it gives us the sum that we want.

398
00:23:25,280 --> 00:23:27,360
That's really cool if you ask me.

399
00:23:27,360 --> 00:23:31,040
We have a question that's just about subsets, it's a discrete math problem,

400
00:23:31,040 --> 00:23:35,760
and yet the way that we can answer it is to evaluate a crazy polynomial

401
00:23:35,760 --> 00:23:38,480
on some judiciously chosen complex numbers.

402
00:23:38,480 --> 00:23:40,480
The more math you do, the more you get.

403
00:23:41,280 --> 00:23:43,440
The more math you do, the less crazy that seems,

404
00:23:43,440 --> 00:23:46,960
because complex numbers have this bizarre relationship with discrete math,

405
00:23:46,960 --> 00:23:49,200
but it really is wonderful, there's no two ways about it.

406
00:23:50,160 --> 00:23:53,920
However, some of you might complain, the only way that this is useful

407
00:23:53,920 --> 00:23:58,480
is if we can actually evaluate this wild expression on our polynomial.

408
00:23:58,480 --> 00:24:02,400
Now remember, the form of the polynomial we know, the one we're comfortable with,

409
00:24:02,400 --> 00:24:06,080
is the factored form, where you have this 1 plus x, 1 plus x squared,

410
00:24:06,080 --> 00:24:08,560
on and on, all the way up to 1 plus x to the 2,000.

411
00:24:09,120 --> 00:24:12,480
Everything up to this point is just meaningless symbolic play,

412
00:24:12,480 --> 00:24:14,880
pushing around one hard problem into another,

413
00:24:14,880 --> 00:24:18,720
unless we can actually roll up our sleeves and do some honest calculation here.

414
00:24:18,720 --> 00:24:22,560
This is the final thrust in our argument, so step back, take a deep breath.

415
00:24:22,560 --> 00:24:26,320
It's actually not as bad as you might think, but let's start just by thinking about

416
00:24:26,320 --> 00:24:30,640
how you might evaluate just one of the roots of unity that we need, maybe zeta itself.

417
00:24:31,600 --> 00:24:34,880
So what that looks like is 1 plus zeta, times 1 plus zeta squared,

418
00:24:34,880 --> 00:24:36,960
times 1 plus zeta cubed, on and on.

419
00:24:36,960 --> 00:24:41,280
Except, importantly, after those first five terms, everything starts repeating,

420
00:24:41,280 --> 00:24:43,120
because powers of zeta repeat.

421
00:24:43,120 --> 00:24:49,520
The entire expression up to 2,000 is basically just going to be a copy of this expression 400 times.

422
00:24:49,520 --> 00:24:51,920
It still might seem hard to evaluate this expression,

423
00:24:51,920 --> 00:24:55,680
but it's way easier than multiplying out 2,000 different terms.

424
00:24:55,680 --> 00:24:59,520
A way you might visualize this is that we're taking each one of those roots of unity,

425
00:24:59,520 --> 00:25:02,880
but basically adding one, we're shifting them all to the right.

426
00:25:02,880 --> 00:25:06,080
This picture actually lends itself to a really nice geometric intuition

427
00:25:06,080 --> 00:25:08,720
for the numerical answer that we might expect.

428
00:25:08,720 --> 00:25:12,960
The thing that we want is the product of these five different complex numbers,

429
00:25:12,960 --> 00:25:14,640
these five yellow dots.

430
00:25:14,640 --> 00:25:18,800
And if you know a thing or two about complex numbers, since these come in conjugate pairs,

431
00:25:18,800 --> 00:25:22,880
all we really need is to multiply the lengths of these five yellow lines.

432
00:25:23,840 --> 00:25:28,960
For example, that dot furthest to the right corresponds to 1 plus zeta to the fifth,

433
00:25:28,960 --> 00:25:32,560
which in the diagram I'm labeling as zeta to the zero plus one.

434
00:25:32,560 --> 00:25:34,080
But it doesn't matter, in either case,

435
00:25:34,080 --> 00:25:36,800
they're both just fancy ways of writing the number two.

436
00:25:36,800 --> 00:25:41,280
Next to that, we have the values one plus zeta and one plus zeta to the fourth,

437
00:25:41,280 --> 00:25:42,960
both of which have the same magnitude.

438
00:25:42,960 --> 00:25:44,720
The lengths of these lines are the same.

439
00:25:44,720 --> 00:25:46,880
And let's just give that a name, L1.

440
00:25:46,880 --> 00:25:50,320
So we need to multiply two different copies of that length, L1 squared.

441
00:25:51,120 --> 00:25:55,600
Similarly, the remaining two values, zeta squared plus one and zeta cubed plus one,

442
00:25:55,600 --> 00:25:58,400
they also have the same length and they're a conjugate pair.

443
00:25:58,400 --> 00:26:00,640
So let's just call that length L2.

444
00:26:00,640 --> 00:26:03,680
So our product needs to include two copies of that L2.

445
00:26:04,160 --> 00:26:08,480
If we were just making a loose heuristic guess, you might notice that L1 is a length

446
00:26:08,480 --> 00:26:13,920
that's something a little bit longer than one, and L2 is something a little bit shorter than one.

447
00:26:13,920 --> 00:26:17,760
So the final answer here probably comes to something around two-ish.

448
00:26:17,760 --> 00:26:19,920
We're not positive, but something in that ballpark.

449
00:26:19,920 --> 00:26:24,240
To turn this into an exact answer, we could just expand out the full expression.

450
00:26:24,240 --> 00:26:27,200
It's honestly not that bad, there's only 32 different terms.

451
00:26:27,200 --> 00:26:37,120
Okay, you've hung with me for a long time now, and I know that it's getting to be a lot.

452
00:26:37,120 --> 00:26:40,720
But there's one final trick in this whole argument that makes our last step

453
00:26:40,720 --> 00:26:42,400
much simpler than you might think it should be.

454
00:26:43,040 --> 00:26:45,520
And let's just recap to remind ourselves of where we are.

455
00:26:45,520 --> 00:26:47,440
So we started with this question asking us,

456
00:26:47,440 --> 00:26:52,480
count the number of subsets of 1 up to 2,000, whose sum is divisible by 5.

457
00:26:52,480 --> 00:26:56,800
We then constructed this polynomial whose coefficients tell us how many subsets

458
00:26:56,960 --> 00:26:58,880
have a particular sum for each value n.

459
00:26:59,760 --> 00:27:03,600
So what we want is to add up every fifth coefficient of that polynomial.

460
00:27:04,720 --> 00:27:09,680
Then we saw how evaluating this polynomial as a function on all of the fifth roots of unity,

461
00:27:09,680 --> 00:27:13,520
then adding them up, ends up giving us exactly this filter that we want.

462
00:27:13,520 --> 00:27:16,640
And here we're evaluating just one of those terms, f of zeta,

463
00:27:16,640 --> 00:27:19,760
which essentially comes down to a product of five complex numbers.

464
00:27:20,320 --> 00:27:24,480
As a super slick way to actually evaluate that product, here's the final trick.

465
00:27:25,120 --> 00:27:27,920
Remember, I described these numbers as roots of unity.

466
00:27:27,920 --> 00:27:30,880
They solve the equation z to the fifth equals one.

467
00:27:30,880 --> 00:27:36,080
Another way to think about that is that they are roots of the polynomial z to the fifth minus one.

468
00:27:36,720 --> 00:27:42,480
Now what that means is we can factor the polynomial z to the fifth minus one to look like this,

469
00:27:42,480 --> 00:27:45,280
where there's one factor corresponding to each one of the roots.

470
00:27:45,280 --> 00:27:47,520
You take z minus each one of the roots.

471
00:27:47,520 --> 00:27:50,560
This expression is kind of magical when you think about all of the crazy

472
00:27:50,560 --> 00:27:53,360
cancellation that has to happen when you expand it all out.

473
00:27:53,360 --> 00:27:56,800
But it is true, and it's super useful for us right now,

474
00:27:56,800 --> 00:28:00,400
because the expression on the right hand side looks almost identical

475
00:28:00,400 --> 00:28:03,120
to the thing we need to evaluate up at the top here.

476
00:28:03,120 --> 00:28:06,240
It basically just has minus signs where we wish there were plus signs.

477
00:28:07,520 --> 00:28:10,160
The trick is to plug in z equals negative one.

478
00:28:10,800 --> 00:28:14,240
If you do that, you essentially have the negative of what we want.

479
00:28:14,240 --> 00:28:18,160
So if you multiply it by negative one, notice how the left hand side here,

480
00:28:18,160 --> 00:28:22,400
which started out as negative one minus one, or negative two, that just becomes two.

481
00:28:23,040 --> 00:28:26,720
And then the right hand side turns into the thing that we want to evaluate.

482
00:28:26,720 --> 00:28:30,320
So just as our geometric intuition earlier might have suggested,

483
00:28:30,320 --> 00:28:35,440
not only is the answer around two, the answer quite magically turns out to be precisely two.

484
00:28:36,320 --> 00:28:40,880
That is actually super nice and very lovely, because it means this bigger expression that

485
00:28:40,880 --> 00:28:45,200
we want to evaluate, where we're adding up f on all of the different roots of unity,

486
00:28:45,200 --> 00:28:47,360
we know its value on the first root of unity.

487
00:28:47,360 --> 00:28:49,600
It will be two to the power 400.

488
00:28:49,600 --> 00:28:53,680
Essentially identical reasoning shows that its value on the next three roots of unity

489
00:28:53,680 --> 00:28:59,200
is also two to the power 400, because remember when you take powers of zeta squared or zeta cubed,

490
00:28:59,200 --> 00:29:02,160
you get the same list of numbers that are just shuffled in a different order.

491
00:29:02,720 --> 00:29:06,640
The only one that's different is when we evaluate it as zeta to the zero.

492
00:29:06,640 --> 00:29:10,080
But zeta to the zero is a fancy way of saying the number one,

493
00:29:10,080 --> 00:29:12,000
and we know how to evaluate this at one.

494
00:29:12,000 --> 00:29:13,040
That's one of the easy things.

495
00:29:13,040 --> 00:29:14,160
We did this earlier.

496
00:29:14,160 --> 00:29:16,640
All of these parentheticals turn into two,

497
00:29:16,640 --> 00:29:20,320
so it looks like taking two multiplied by itself 2,000 times.

498
00:29:20,320 --> 00:29:26,160
And so finally with that, we have a highly explicit honest answer to our counting question.

499
00:29:26,160 --> 00:29:29,520
To add up all of these coefficients which are divisible by five,

500
00:29:29,520 --> 00:29:34,640
which remember is a way of counting how many total subsets have a sum divisible by five,

501
00:29:34,640 --> 00:29:38,160
the answer is one fifth of this weird complex expression,

502
00:29:38,160 --> 00:29:44,400
which we just computed to be two to the 2,000 plus four different copies of two to the 400.

503
00:29:45,360 --> 00:29:49,200
And here you might want to do just a quick sanity check on does this answer make any sense.

504
00:29:49,840 --> 00:29:53,920
For example, if you do it in the smaller case with the set one, two, three, four, five,

505
00:29:53,920 --> 00:29:56,800
and you walk through all the same reasoning that we just did,

506
00:29:56,800 --> 00:29:59,920
it tells you that the answer is one fifth of two to the fifth,

507
00:29:59,920 --> 00:30:04,000
the total number of subsets, plus four times two to the one in this case,

508
00:30:04,560 --> 00:30:08,160
which is a fifth of 32 plus eight, which is eight.

509
00:30:08,160 --> 00:30:12,160
And if you'll remember when we explicitly looked at them all, that was in fact the answer.

510
00:30:14,960 --> 00:30:22,080
Look, this is a hard puzzle, and when it's worth putting in the time to solve a hard problem,

511
00:30:22,080 --> 00:30:24,240
it's also worth taking some time to reflect on it.

512
00:30:24,240 --> 00:30:26,000
What do you get out of this? What's the takeaway?

513
00:30:26,640 --> 00:30:28,640
Now you could reflect on the answer itself,

514
00:30:28,640 --> 00:30:32,960
how the dominant part is indeed one fifth of all the total subsets like we might have guessed,

515
00:30:32,960 --> 00:30:36,960
and how this error term came about from the not quite destructive interference

516
00:30:36,960 --> 00:30:39,280
in a massive combination of roots of unity.

517
00:30:40,080 --> 00:30:43,600
But again, what makes this question interesting is not the answer,

518
00:30:43,600 --> 00:30:48,560
it's the way that we solved it, namely taking a discrete sequence that we want to understand,

519
00:30:48,560 --> 00:30:51,680
and treating it as the coefficients on a polynomial,

520
00:30:51,680 --> 00:30:55,120
then evaluating that polynomial on complex values.

521
00:30:55,760 --> 00:30:59,360
Both of those steps are probably highly unexpected at the outset,

522
00:30:59,360 --> 00:31:02,720
but both of those steps relate to some very general and powerful techniques

523
00:31:02,720 --> 00:31:04,720
that you'll find elsewhere in math.

524
00:31:04,720 --> 00:31:09,120
For example, at the top of the lesson I promised that the technique that we would use

525
00:31:09,120 --> 00:31:12,320
would be similar in spirit to the way that primes are studied,

526
00:31:12,320 --> 00:31:16,240
and the set of ideas that leads up to the Riemann hypothesis and things like that.

527
00:31:16,240 --> 00:31:18,320
Now this is a very beautiful topic,

528
00:31:18,320 --> 00:31:23,280
enough so that I think it seems a little criminal to cram some kind of rushed version into the end here.

529
00:31:23,280 --> 00:31:27,440
The right thing to do, I think, is to just make that video I promised a while back

530
00:31:27,440 --> 00:31:29,680
about the zeta function, take the time, do it right.

531
00:31:30,320 --> 00:31:33,920
But if you're curious, and if you'll allow me to throw some things up on the screen

532
00:31:33,920 --> 00:31:38,320
without explaining them, here's the two or three sentence version of how the two are parallel.

533
00:31:38,880 --> 00:31:40,480
Just like our subsets puzzle,

534
00:31:40,480 --> 00:31:44,880
the way that Riemann studied primes involved a discrete sequence we want to understand,

535
00:31:44,880 --> 00:31:47,280
something carrying information about prime numbers,

536
00:31:47,840 --> 00:31:52,320
and then considering a function whose coefficients are the terms in that sequence.

537
00:31:53,040 --> 00:31:57,360
In that case it's not quite a polynomial, instead it's a related structure known as a Dirichlet

538
00:31:57,360 --> 00:32:02,080
series, or Dirichlet series depending on who you ask, but it's the same essential idea.

539
00:32:02,080 --> 00:32:06,320
Then the way to suss out information about those coefficients

540
00:32:06,320 --> 00:32:09,120
comes from studying how this function behaves with,

541
00:32:09,120 --> 00:32:11,360
you guessed it, complex valued inputs.

542
00:32:12,160 --> 00:32:15,040
The techniques in his case get a lot more sophisticated,

543
00:32:15,040 --> 00:32:18,400
after all Riemann was a pioneer in complex analysis,

544
00:32:18,400 --> 00:32:22,320
but the fact remains, extending your domain beyond real numbers like this

545
00:32:22,320 --> 00:32:27,520
offers you, the mathematician, a lot more power in making deductions about the coefficients.

546
00:32:28,560 --> 00:32:31,600
For some viewers this all might leave the lingering question of

547
00:32:31,600 --> 00:32:35,840
why exactly complex numbers are so unreasonably useful in this way.

548
00:32:36,480 --> 00:32:41,280
It's a hard question to answer exactly, but if you think about our puzzle, everything we just did,

549
00:32:41,280 --> 00:32:45,280
as soon as we were in this situation where plugging in different inputs revealed hidden

550
00:32:45,280 --> 00:32:49,920
information about the coefficients, it's sort of like, the more inputs you can work with,

551
00:32:49,920 --> 00:32:54,000
the better, so you might as well open yourself up to a richer space of numbers,

552
00:32:54,000 --> 00:32:55,120
like the complex plane.

553
00:32:55,680 --> 00:32:59,920
But there is a more specific intuition that I want you to come away with here.

554
00:32:59,920 --> 00:33:04,720
In our puzzle, the relevant fact that we wanted, the sum of every fifth coefficient,

555
00:33:04,720 --> 00:33:06,960
was a kind of frequency question.

556
00:33:06,960 --> 00:33:10,720
And the real reason that complex numbers, as opposed to some other structure,

557
00:33:10,720 --> 00:33:13,760
proved to be useful for us, is that we could find a value

558
00:33:13,760 --> 00:33:16,960
so that successive products have this cycling behavior.

559
00:33:16,960 --> 00:33:20,720
This use of values on the unit circle, and roots of unity in particular,

560
00:33:20,720 --> 00:33:24,240
to suss out frequency information, is extremely fruitful.

561
00:33:24,240 --> 00:33:27,840
It is almost impossible to overstate how helpful that idea is.

562
00:33:28,400 --> 00:33:33,840
Just to give one out of thousands of examples, in the 1990s Peter Shor found a way for quantum

563
00:33:33,840 --> 00:33:38,480
computers to factor large numbers way way faster than classical computers can.

564
00:33:38,480 --> 00:33:42,960
And if you go in and you look at the details of how what we now call Shor's algorithm works,

565
00:33:43,520 --> 00:33:49,120
the idea is essentially this, the use of roots of unity to detect a kind of frequency information.

566
00:33:49,120 --> 00:33:53,680
More generally, this is the core idea that underlies Fourier transforms and Fourier series,

567
00:33:53,680 --> 00:33:56,000
and the infinite swell of topics that follow from those.

568
00:33:56,800 --> 00:34:01,520
As to the topic of generating functions themselves, we've really only just scratched the surface here,

569
00:34:01,520 --> 00:34:05,840
and if you want to learn more, I highly recommend this kind of hilariously named book,

570
00:34:05,840 --> 00:34:08,320
Generating Functionology, by Herbert Wilf.

571
00:34:08,320 --> 00:34:10,800
And I'll also leave up a few fun puzzles on the screen here for

572
00:34:10,800 --> 00:34:23,680
anyone who wants to flex their muscles a bit with the idea.

